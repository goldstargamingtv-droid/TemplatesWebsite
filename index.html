<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeployTemplate - Premium Website Templates</title>
    <meta name="description" content="Beautiful, professional website templates ready to launch your business. No coding required.">
    
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Supabase Client Library -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        /* ============================================
           DEPLOYTEMPLATE - ALL STYLES
           ============================================ */

        /* CSS Variables */
        :root {
            --primary: #0D9488;
            --primary-dark: #0F766E;
            --primary-light: #14B8A6;
            --secondary: #06B6D4;
            --accent: #F97316;
            
            --gradient-1: linear-gradient(135deg, #0D9488 0%, #14B8A6 100%);
            --gradient-2: linear-gradient(135deg, #14B8A6 0%, #06B6D4 100%);
            --gradient-3: linear-gradient(135deg, #0F766E 0%, #0EA5E9 100%);
            
            --border-radius: 8px;
            --border-radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark Mode (Default) */
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border-color: #27272a;
            --card-bg: #18181b;
            --card-hover: #27272a;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.5);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.6);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.7);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.8);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.9);
        }

        /* Light Mode */
        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f1f5f9;
            --bg-tertiary: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #334155;
            --text-muted: #64748b;
            --border-color: #cbd5e1;
            --card-bg: #ffffff;
            --card-hover: #f8fafc;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-1);
            border-radius: 6px;
            border: 2px solid var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-2);
            box-shadow: 0 0 10px rgba(13, 148, 136, 0.5);
        }

        /* Firefox Scrollbar */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--bg-secondary);
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        /* Container */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 3rem;
        }
        
        /* Main content wrapper - pushes content right on desktop */
        .main-content {
            margin-left: 0;
            transition: margin-left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @media (min-width: 1025px) {
            .main-content {
                margin-left: 280px;
            }
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            color: var(--text-primary);
        }

        .gradient-text {
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            text-align: center;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--primary);
            color: #ffffff;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            background: #14B8A6;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(20, 184, 166, 0.4);
        }

        .btn-secondary {
            background: var(--accent);
            color: #ffffff;
            border: none;
            box-shadow: var(--shadow);
        }

        .btn-secondary:hover {
            background: #EA580C;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(249, 115, 22, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray-light);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .btn-white {
            background: var(--white);
            color: var(--dark);
        }

        .btn-white:hover {
            background: var(--light);
        }

        .btn-outline-white {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--white);
        }

        .btn-outline-white:hover {
            background: var(--white);
            color: var(--dark);
        }

        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        .btn-block {
            width: 100%;
            justify-content: center;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid transparent;
            z-index: 1000;
            padding: 0;
            transition: var(--transition);
            box-shadow: 0 4px 20px rgba(13, 148, 136, 0.1);
        }
        
        .navbar::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                #0D9488 0%, 
                #14B8A6 22.5%, 
                #F97316 25%, 
                #14B8A6 27.5%,
                #0D9488 50%,
                #14B8A6 72.5%, 
                #F97316 75%, 
                #14B8A6 77.5%,
                #0D9488 100%);
            background-size: 200% 100%;
            animation: shimmer 15s linear infinite;
        }
        
        @keyframes shimmer {
            0% {
                background-position: 0% 0;
            }
            100% {
                background-position: 300% 0;
            }
        }

        [data-theme="light"] .navbar {
            background: rgba(255, 255, 255, 0.85);
            box-shadow: 0 4px 20px rgba(249, 115, 22, 0.08);
        }
        
        [data-theme="light"] .navbar::after {
            background: linear-gradient(90deg, 
                #0D9488 0%, 
                #14B8A6 25%, 
                #F97316 50%, 
                #14B8A6 75%, 
                #0D9488 100%);
            background-size: 200% 100%;
        }

        .navbar .container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 1.5rem;
            max-width: 100%;
            padding: 0 1.5rem;
        }

        /* Navbar Search */
        .nav-search-wrapper {
            position: relative;
            flex: 1;
            max-width: none;
        }

        .nav-search {
            position: relative;
            display: flex;
            align-items: center;
        }

        .nav-search svg {
            position: absolute;
            left: 0.875rem;
            color: #F97316;
            pointer-events: none;
        }

        .nav-search input {
            width: 100%;
            padding: 0.625rem 0.875rem 0.625rem 2.5rem;
            background: var(--card-bg);
            border: 1.5px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .nav-search input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }

        .nav-search input::placeholder {
            color: var(--text-muted);
        }

        /* Search Suggestions Dropdown */
        .search-suggestions {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            z-index: 10000;
            display: none;
        }

        .search-suggestions.active {
            display: block;
        }

        .suggestion-item {
            padding: 0.875rem 1rem;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.875rem;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background: var(--card-hover);
        }

        .suggestion-icon {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            background: var(--gradient-1);
            flex-shrink: 0;
        }

        .suggestion-content {
            flex: 1;
        }

        .suggestion-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.2rem;
        }

        .suggestion-category {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .suggestion-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .suggestion-empty {
            padding: 2rem 1rem;
            text-align: center;
            color: var(--text-muted);
        }

        .suggestion-empty svg {
            width: 48px;
            height: 48px;
            margin: 0 auto 0.75rem;
            opacity: 0.3;
        }

        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.65rem;
            font-weight: 800;
            background: linear-gradient(135deg, #14B8A6 0%, #14B8A6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0;
            transition: var(--transition);
            flex-shrink: 0;
            margin: -20px -3rem -20px -3rem;
            margin-right: auto;
        }

        .logo-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            margin-right: -35px;
            z-index: 1;
            position: relative;
        }

        .logo-text {
            white-space: nowrap;
            display: inline;
            letter-spacing: -0.5px;
            position: relative;
            z-index: 2;
        }
        
        .logo-text {
            display: flex;
            align-items: baseline;
            gap: 0;
        }
        
        .logo-text-deploy {
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff !important;
        }
        
        [data-theme="light"] .logo-text-deploy {
            color: #000000 !important;
            -webkit-text-fill-color: #000000 !important;
        }
        
        .logo-text-template {
            display: inline-block;
            position: relative;
            min-width: 5.5em;
            margin-left: 0.15em;
        }
        
        .logo-text-template-inner {
            white-space: nowrap;
        }
        
        .logo-text-template-inner span {
            display: inline-block;
            opacity: 0;
            transition: opacity 0.05s ease;
            color: #14B8A6 !important;
            -webkit-text-fill-color: #14B8A6 !important;
        }
        
        [data-theme="light"] .logo-text-template-inner span {
            color: #0D9488 !important;
            -webkit-text-fill-color: #0D9488 !important;
        }
        
        .logo-text-template-cursor {
            position: absolute;
            left: 0;
            top: 0.3em;
            width: 0.5em;
            height: 1em;
            background-color: #ffffff;
            transition: left 0.1s ease;
            animation: blink-caret 0.9s step-end infinite;
        }
        
        [data-theme="light"] .logo-text-template-cursor {
            background-color: #000000;
        }
        
        @keyframes typewriter-reveal {
            0% {
                opacity: 0;
            }
            0.1%, 20% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            80.1%, 100% {
                opacity: 0;
            }
        }
        
        @keyframes reveal {
            0%, 19.9% {
                opacity: 0;
            }
            20%, 79.9% {
                opacity: 1;
            }
            80%, 100% {
                opacity: 0;
            }
        }
        
        @keyframes blink-caret {
            0%, 49% {
                opacity: 1;
            }
            50%, 100% {
                opacity: 0;
            }
        }

        .logo:hover {
            transform: translateY(-1px);
        }

        .logo-icon {
            font-size: 1.75rem;
        }

        .nav-links {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-shrink: 0;
            margin-left: auto;
        }

        .nav-links a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 0.75rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .nav-links a:hover {
            background: var(--card-hover);
            color: var(--text-primary);
            padding-left: 1rem;
        }

        .nav-links a:hover::before {
            transform: scaleY(1);
        }

        .nav-links a.active {
            background: rgba(20, 184, 166, 0.1);
            color: var(--primary);
            padding-left: 1rem;
        }

        .nav-links a.active::before {
            transform: scaleY(1);
        }

        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            gap: 0.3rem;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
            transition: var(--transition);
        }
        
        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Nav CTA */
        .nav-cta {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            margin-top: -3px;
        }

        /* User Menu Styles */
        .user-menu {
            position: relative;
            z-index: 10002;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #14B8A6 0%, #0D9488 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            box-shadow: 0 2px 8px rgba(20, 184, 166, 0.3);
        }

        .user-avatar::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border-radius: 50%;
            background: linear-gradient(45deg, #14B8A6, #F97316, #06B6D4, #14B8A6);
            background-size: 300% 300%;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: gradientRotate 3s ease infinite;
        }

        .user-avatar:hover::before {
            opacity: 1;
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(20, 184, 166, 0.5);
        }

        .user-avatar::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: var(--bg-primary);
            z-index: -1;
        }

        @keyframes gradientRotate {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .user-dropdown {
            position: absolute;
            top: calc(100% + 0.25rem);
            right: 0;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-width: 240px;
            padding: 0.75rem;
            display: none;
            flex-direction: column;
            gap: 0.25rem;
            z-index: 10001;
        }

        .user-dropdown::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 0;
            left: 0;
            height: 8px;
            background: transparent;
        }

        .user-dropdown.active {
            display: flex;
        }

        .user-dropdown a,
        .user-dropdown button {
            padding: 0.875rem 1rem;
            color: var(--text-primary);
            transition: all 0.2s ease;
            border-radius: 8px;
            background: none;
            border: none;
            text-align: left;
            cursor: pointer;
            font-size: 0.95rem;
            width: 100%;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        }

        .user-dropdown a svg,
        .user-dropdown button svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }

        .user-dropdown a:hover,
        .user-dropdown button:hover {
            background: rgba(20, 184, 166, 0.1);
            color: #14B8A6;
        }

        .user-dropdown a:hover svg,
        .user-dropdown button:hover svg {
            opacity: 1;
        }

        .user-dropdown-divider {
            height: 1px;
            background: var(--border-color);
            margin: 0.5rem 0;
        }

        .user-dropdown button.sign-out {
            color: #F97316;
        }

        .user-dropdown button.sign-out:hover {
            background: rgba(249, 115, 22, 0.1);
            color: #F97316;
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            border-radius: 15px;
            background: linear-gradient(135deg, #18181b 0%, #27272a 100%);
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            padding: 0;
        }

        .theme-toggle:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }
        
        .theme-toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(135deg, #27272a 0%, #3f3f46 100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .theme-toggle-slider svg {
            width: 14px;
            height: 14px;
            fill: var(--accent);
        }
        
        [data-theme="light"] .theme-toggle {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
        }
        
        [data-theme="light"] .theme-toggle-slider {
            left: 32px;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
        }

        /* Left Sidebar Navigation */
        .sidebar {
            position: fixed;
            top: 70px; /* Height of navbar */
            left: 0;
            width: 280px;
            height: calc(100vh - 70px);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            z-index: 100;
            overflow-y: auto;
            overflow-x: hidden;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Hide sidebar on mobile by default */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 99;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            display: none;
        }
        
        /* Only show overlay on mobile */
        @media (max-width: 1024px) {
            .sidebar-overlay {
                display: block;
            }
            
            .sidebar-overlay.active {
                opacity: 1;
                visibility: visible;
            }
        }

        .sidebar-content {
            padding: 1.5rem;
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            padding: 0 0.75rem;
        }

        .sidebar-menu {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .sidebar-menu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 0.75rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .sidebar-menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .sidebar-menu-item:hover {
            background: var(--card-hover);
            color: var(--text-primary);
            padding-left: 1rem;
        }

        .sidebar-menu-item:hover::before {
            transform: scaleY(1);
        }

        .sidebar-menu-item.active {
            background: rgba(20, 184, 166, 0.1);
            color: var(--primary);
            padding-left: 1rem;
        }

        .sidebar-menu-item.active::before {
            transform: scaleY(1);
        }

        .sidebar-menu-item svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .sidebar-menu-item .badge {
            margin-left: auto;
            background: var(--primary);
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.15rem 0.5rem;
            border-radius: 12px;
        }

        .sidebar-toggle {
            position: relative;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            z-index: 10001;
            transition: all 0.3s ease;
            margin-right: 1rem;
        }
        
        /* Hide on desktop, show on mobile */
        @media (min-width: 1025px) {
            .sidebar-toggle {
                display: none;
            }
        }

        .sidebar-toggle:hover {
            transform: scale(1.05);
        }

        .sidebar-toggle span {
            width: 26px;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: block;
        }

        .sidebar-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .sidebar-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .sidebar-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Cart System */
        .cart-icon-wrapper {
            position: relative;
            cursor: pointer;
            padding: 0.75rem;
            transition: var(--transition);
            z-index: 10002;
        }

        .cart-icon-wrapper:hover {
            transform: scale(1.05);
        }

        .cart-icon {
            width: 24px;
            height: 24px;
            color: var(--text-primary);
        }

        .cart-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: #F97316;
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.15rem 0.4rem;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        .cart-dropdown {
            position: absolute;
            top: calc(100% + 0.25rem);
            right: 0;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            min-width: 320px;
            max-width: 400px;
            padding: 1rem;
            display: none;
            flex-direction: column;
            gap: 1rem;
            z-index: 10001;
            max-height: 500px;
        }

        .cart-dropdown::before {
            content: '';
            position: absolute;
            top: -8px;
            right: 0;
            left: 0;
            height: 8px;
            background: transparent;
        }

        .cart-dropdown.active {
            display: flex;
        }

        .cart-dropdown-header {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        #cartDropdownItems {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        #cartDropdownFooter {
            flex-shrink: 0;
        }

        .cart-item {
            display: flex;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .cart-item:hover {
            background: var(--card-hover);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 6px;
            object-fit: cover;
            background: var(--gradient-1);
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
            font-size: 0.95rem;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: 700;
            font-size: 0.9rem;
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem;
            transition: var(--transition);
            font-size: 1.2rem;
        }

        .cart-item-remove:hover {
            color: #dc2626;
        }

        .cart-empty {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-muted);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .cart-empty-icon {
            font-size: 4rem;
            opacity: 0.3;
        }

        .cart-empty-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .cart-empty-subtext {
            font-size: 0.9rem;
            color: var(--text-muted);
            max-width: 280px;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-color);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .cart-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Cart Modal */
        .cart-modal {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 500px;
            height: 100vh;
            background: var(--bg-primary);
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-modal.active {
            right: 0;
        }

        .cart-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .cart-modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .cart-modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-muted);
            cursor: pointer;
            line-height: 1;
            padding: 0;
            transition: var(--transition);
        }

        .cart-modal-close:hover {
            color: var(--text-primary);
        }

        .cart-modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .cart-modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .cart-modal-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            display: none;
        }

        .cart-overlay.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 6rem 0 2rem;
            position: relative;
            overflow: visible;
            z-index: 1;
        }
        
        section {
            position: relative;
            z-index: 1;
            background: transparent;
        }

        .hero .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5rem;
            align-items: center;
            position: relative;
            z-index: 10;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -2px;
        }

        .hero-description {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.8;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .hero-visual {
            position: relative;
        }

        .template-showcase {
            display: grid;
            gap: 1.5rem;
            transform: perspective(1000px) rotateY(-5deg);
        }

        .showcase-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            animation: floatIn 0.8s ease-out;
            animation-delay: var(--delay);
            animation-fill-mode: backwards;
            border: 1px solid var(--border-color);
        }

        @keyframes floatIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-header {
            padding: 1rem;
            background: var(--bg-tertiary);
        }

        .browser-dots {
            display: flex;
            gap: 0.5rem;
        }

        .browser-dots span {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border-color);
        }

        [data-theme="light"] .browser-dots span:nth-child(1) {
            background: #ff5f56;
        }

        [data-theme="light"] .browser-dots span:nth-child(2) {
            background: #ffbd2e;
        }

        [data-theme="light"] .browser-dots span:nth-child(3) {
            background: #27c93f;
        }

        .card-preview {
            height: 200px;
            overflow: hidden;
        }

        .preview-gradient {
            width: 100%;
            height: 100%;
        }

        .gradient-1 {
            background: var(--gradient-1);
        }

        .gradient-2 {
            background: var(--gradient-2);
        }

        .gradient-3 {
            background: var(--gradient-3);
        }

        .hero-background {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
            overflow: hidden;
        }

        .bg-gradient {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.3;
            animation: gradientPulse 8s ease-in-out infinite;
        }
        
        @keyframes gradientPulse {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.1);
            }
        }

        .bg-gradient-1 {
            width: 600px;
            height: 600px;
            background: var(--gradient-1);
            top: -200px;
            right: -100px;
            animation-delay: 0s;
        }

        .bg-gradient-2 {
            width: 500px;
            height: 500px;
            background: var(--gradient-2);
            bottom: -150px;
            left: -100px;
            animation-delay: 2s;
        }

        .bg-grid {
            position: absolute;
            inset: 0;
            background-image: linear-gradient(var(--gray-light) 1px, transparent 1px),
                              linear-gradient(90deg, var(--gray-light) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.1;
        }

        /* Section Styles */
        section {
            padding: 8rem 0;
        }

        .section-header {
            text-align: center;
            max-width: 700px;
            margin: 0 auto 5rem;
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .section-description {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Templates Section */
        .templates-section {
            background: transparent;
        }

        .filter-bar {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 50px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .template-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .template-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .template-image {
            position: relative;
            height: 300px;
            background: var(--gradient-1);
            overflow: hidden;
        }

        .template-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .template-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            opacity: 0;
            transition: var(--transition);
        }

        .template-card:hover .template-overlay {
            opacity: 1;
        }

        .template-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            background: var(--accent);
            color: var(--white);
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge-new {
            background: var(--secondary);
        }

        .template-info {
            padding: 1.5rem;
        }

        .template-category {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .template-title {
            font-size: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .template-description {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .template-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .tag {
            padding: 0.25rem 0.75rem;
            background: var(--bg-tertiary);
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .template-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .template-price {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .price-original {
            font-size: 1rem;
            color: var(--text-muted);
            text-decoration: line-through;
        }

        .price-current {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--primary);
        }

        .templates-cta {
            text-align: center;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .templates-cta a {
            color: var(--primary);
            font-weight: 600;
        }

        /* Features Section */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
        }

        .feature-card {
            padding: 2rem;
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--bg-tertiary);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        /* Pricing Section */
        .pricing-section {
            background: var(--bg-secondary);
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .pricing-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            padding: 2.5rem;
            box-shadow: var(--shadow);
            border: 2px solid var(--border-color);
            transition: var(--transition);
            position: relative;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .pricing-card.featured {
            border-color: var(--primary);
            background: var(--gradient-1);
            color: white;
            transform: scale(1.05);
        }

        .pricing-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
        }

        .pricing-card.featured * {
            color: white;
        }

        .pricing-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.5rem 1rem;
            background: var(--accent);
            color: var(--white);
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .pricing-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .pricing-header h3 {
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .pricing-header p {
            color: var(--text-secondary);
        }

        .pricing-card.featured .pricing-header p {
            color: rgba(255, 255, 255, 0.9);
        }

        .pricing-price {
            text-align: center;
            margin-bottom: 2rem;
        }

        .price-original {
            font-size: 1.25rem;
            color: var(--text-muted);
            text-decoration: line-through;
            margin-bottom: 0.5rem;
        }

        .pricing-card.featured .price-original {
            color: rgba(255, 255, 255, 0.7);
        }

        .price-current {
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1;
        }

        .currency {
            font-size: 2rem;
        }

        .price-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        .pricing-card.featured .price-label {
            color: rgba(255, 255, 255, 0.9);
        }

        .pricing-features {
            margin-bottom: 2rem;
        }

        .pricing-features li {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .pricing-card.featured .pricing-features li {
            border-bottom-color: rgba(255, 255, 255, 0.2);
        }

        .pricing-features li:last-child {
            border-bottom: none;
        }

        .pricing-features svg {
            color: var(--secondary);
            flex-shrink: 0;
        }

        /* Showcase Section */
        .showcase-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
        }

        .showcase-item {
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            background: var(--card-bg);
            border: 1px solid var(--border-color);
        }

        .showcase-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .showcase-image {
            height: 250px;
            background: var(--bg-tertiary);
        }

        .showcase-placeholder {
            width: 100%;
            height: 100%;
            background: var(--gradient-1);
        }

        .showcase-info {
            padding: 1.5rem;
        }

        .showcase-info h4 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .showcase-info p {
            color: var(--text-secondary);
        }

        /* CTA Section */
        .cta-section {
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(20px);
            border: 2px solid transparent;
            border-image: var(--gradient-1) 1;
            color: white;
            text-align: center;
            padding: 6rem 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .cta-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-1);
            opacity: 0.1;
            z-index: 0;
        }
        
        .cta-content {
            position: relative;
            z-index: 1;
        }
        
        [data-theme="light"] .cta-section {
            background: rgba(255, 255, 255, 0.6);
            color: var(--text-primary);
        }

        .cta-content h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: white;
        }
        
        [data-theme="light"] .cta-content h2 {
            color: var(--text-primary);
        }

        .cta-content p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Footer */
        .footer {
            background: #0a0a0a;
            color: var(--text-primary);
            padding: 4rem 0 2rem;
            border-top: 1px solid var(--border-color);
            position: relative;
            z-index: 1;
        }
        
        [data-theme="light"] .footer {
            background: #f8f8f8;
        }

        .footer-content {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-logo {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
        }

        .footer-column p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .social-links {
            display: flex;
            gap: 1rem;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            color: var(--text-primary);
        }

        .social-links a:hover {
            background: var(--primary);
            color: white;
        }

        .footer-column h4 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .footer-column ul li {
            margin-bottom: 0.75rem;
        }

        .footer-column ul li a {
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .footer-column ul li a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-muted);
        }

        .footer-links {
            display: flex;
            gap: 3rem;
        }

        .footer-links a {
            color: var(--text-muted);
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .hero .container {
                grid-template-columns: 1fr;
            }
            
            .hero-visual {
                order: -1;
            }
            
            .template-showcase {
                transform: none;
            }
            
            .footer-content {
                grid-template-columns: 1fr 1fr;
            }
            
            .pricing-card.featured {
                transform: scale(1);
            }
            
            .pricing-card.featured:hover {
                transform: translateY(-5px);
            }
        }

        @media (max-width: 768px) {
            .nav-cta {
                display: none;
            }
            
            .nav-links {
                display: flex;
                position: fixed;
                top: 0;
                right: -100%;
                height: 100vh;
                width: 80%;
                max-width: 300px;
                background: var(--bg-primary);
                flex-direction: column;
                padding: 6rem 2rem 2rem;
                gap: 3rem;
                box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
                transition: right 0.3s ease;
                z-index: 1000;
                overflow-y: auto;
            }
            
            .nav-links.active {
                right: 0;
            }
            
            .nav-links li {
                width: 100%;
            }
            
            .nav-links a {
                display: block;
                padding: 1rem;
                font-size: 1.1rem;
            }
            
            .mobile-menu-toggle {
                display: flex;
            }
            
            .logo {
                font-size: 1.2rem;
                margin: -15px -2rem -15px -2rem;
            }
            
            .logo-image {
                width: 80px;
                height: 80px;
            }
            
            .navbar .container {
                gap: 0.5rem;
            }
            
            .nav-search-wrapper {
                display: none;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-description {
                font-size: 1.1rem;
            }
            
            .hero-stats {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .cta-content h2 {
                font-size: 2rem;
            }
            
            .templates-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .footer-bottom {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* ============================================
           MODAL, DASHBOARD & AUTH STYLES
           ============================================ */

        /* Page routing */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 1rem;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .modal {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            padding: 2.5rem;
            max-width: 450px;
            width: 100%;
            box-shadow: var(--shadow-xl);
            position: relative;
            animation: slideUpModal 0.3s ease-out;
            border: 1px solid var(--border-color);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: var(--transition);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--text-primary);
            background: var(--card-hover);
        }

        .modal h2 {
            margin-bottom: 0.5rem;
            font-size: 1.75rem;
        }

        .modal > p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-group input {
            width: 100%;
            padding: 0.85rem 1rem;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
            font-family: inherit;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--bg-secondary);
        }

        .form-error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.75rem;
            padding: 0.5rem;
            background: rgba(239, 68, 68, 0.1);
            border-radius: var(--border-radius);
            display: none;
        }

        .form-error.active {
            display: block;
        }

        .form-link {
            text-align: center;
            margin-top: 1.5rem;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .form-link a {
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .form-link a:hover {
            color: var(--primary-light);
            text-decoration: underline;
        }

        /* Dashboard */
        .dashboard {
            padding: 8rem 0 4rem;
            min-height: 100vh;
        }

        .dashboard-header {
            margin-bottom: 3rem;
            text-align: center;
        }

        .dashboard-header h1 {
            font-size: 2.75rem;
            margin-bottom: 0.75rem;
        }

        .dashboard-header p {
            color: var(--text-secondary);
            font-size: 1.15rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .dashboard-card {
            background: var(--card-bg);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .dashboard-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .card-image {
            height: 220px;
            background: var(--gradient-1);
            position: relative;
            overflow: hidden;
        }

        .card-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.4rem 0.8rem;
            background: rgba(255, 255, 255, 0.95);
            color: var(--primary);
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .card-content {
            padding: 1.75rem;
        }

        .card-content h3 {
            margin-bottom: 0.5rem;
            font-size: 1.35rem;
        }

        .card-content p {
            color: var(--text-secondary);
            margin-bottom: 1.25rem;
            font-size: 0.925rem;
            line-height: 1.6;
        }

        .card-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.25rem;
            flex-wrap: wrap;
        }

        .card-meta-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .card-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .empty-state {
            text-align: center;
            padding: 5rem 2rem;
            grid-column: 1 / -1;
        }

        .empty-state-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            opacity: 0.4;
        }

        .empty-state h3 {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
        }

        .empty-state p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.05rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUpModal {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Notification Toast */

        /* Browse Page */
        .browse-page {
            padding: 8rem 0 4rem;
            min-height: 100vh;
        }

        .browse-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .browse-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .browse-header p {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .browse-controls {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-box .search-suggestions {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
        }

        .search-box svg {
            position: absolute;
            left: 1rem;
            color: var(--text-muted);
        }

        .search-box input {
            width: 100%;
            padding: 0.875rem 1rem 0.875rem 3rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }

        .filter-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 0.875rem 1.25rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-select:hover {
            border-color: var(--primary);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }

        .loading-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 4rem 2rem;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border-color);
            border-top-color: var(--primary);
            border-radius: 50%;
            margin: 0 auto 1rem;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-state p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 4rem;
        }

        .pagination-btn {
            padding: 0.75rem 1.5rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .pagination-btn:hover:not(:disabled) {
            background: var(--primary);
            border-color: var(--primary);
            color: #ffffff;
        }

        .pagination-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .pagination-pages {
            display: flex;
            gap: 0.5rem;
        }

        .pagination-page {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .pagination-page:hover {
            border-color: var(--primary);
        }

        .pagination-page.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #ffffff;
        }

        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
        }

        /* Template Detail Page */
        .template-detail {
            padding: 8rem 0 4rem;
            min-height: 100vh;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 2rem;
        }

        .back-btn:hover {
            border-color: var(--primary);
            background: var(--primary);
            color: #ffffff;
        }

        .detail-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-bottom: 4rem;
            align-items: start;
        }

        .detail-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: var(--accent);
            color: #ffffff;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .detail-category {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        .detail-title {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .detail-description {
            font-size: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .detail-meta {
            display: flex;
            gap: 3rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .meta-item svg {
            color: var(--primary);
        }

        .detail-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .detail-price {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
        }

        .price-label {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .detail-preview {
            position: sticky;
            top: 100px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .detail-preview-image {
            width: 100%;
            height: 500px;
            background: var(--gradient-1);
        }

        .detail-section {
            margin-bottom: 4rem;
        }

        .detail-section h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .feature-item {
            display: flex;
            align-items: start;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .feature-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-1);
            border-radius: var(--border-radius);
            color: #ffffff;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .feature-content h4 {
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .feature-content p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .screenshots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 3rem;
        }

        .screenshot-item {
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .screenshot-item:hover {
            transform: scale(1.02);
            border-color: var(--primary);
            box-shadow: var(--shadow-xl);
        }

        .screenshot-item img {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .included-list {
            display: grid;
            gap: 1.5rem;
        }

        .included-item {
            display: flex;
            align-items: start;
            gap: 1.5rem;
            padding: 2rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
        }

        .included-item svg {
            color: var(--primary);
            flex-shrink: 0;
            margin-top: 0.25rem;
        }

        .included-item h4 {
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .included-item p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .tech-stack {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .tech-item {
            padding: 1rem 1.5rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-weight: 600;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .tech-item:hover {
            border-color: var(--primary);
            background: var(--primary);
            color: #ffffff;
        }

        /* Notification Toast */
        .notification {
            position: fixed;
            top: 100px;
            right: 24px;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius-lg);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            animation: slideInRight 0.3s ease-out;
            max-width: 400px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
        }

        .notification.success {
            border-left: 4px solid #14B8A6;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .notification.success::before {
            content: '';
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #14B8A6;
            color: white;
            font-weight: 700;
        }

        .notification.error {
            border-left: 4px solid #F97316;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .notification.error::before {
            content: '';
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #F97316;
            color: white;
            font-weight: 700;
        }

        .notification.info {
            border-left: 4px solid #06B6D4;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .notification.info::before {
            content: '';
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #06B6D4;
            color: white;
            font-weight: 700;
        }


        @keyframes slideInRight {
            from {
                transform: translateX(120%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .modal {
                padding: 2rem 1.5rem;
                margin: 1rem;
            }

            .dashboard-header h1 {
                font-size: 2rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .notification {
                right: 1rem;
                left: 1rem;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    
    <!-- Left Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-content">

            <!-- Quick Filters -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">Quick Filters</div>
                <div class="sidebar-menu">
                    <a class="sidebar-menu-item" onclick="filterTemplates('new')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <span>New Releases</span>
                        <span class="badge">12</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterTemplates('popular')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span>Popular</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterTemplates('premium')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                        <span>Premium</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterTemplates('free')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"/>
                            <path d="M4 6v12c0 1.1.9 2 2 2h14v-4"/>
                            <line x1="2" y1="12" x2="22" y2="12"/>
                        </svg>
                        <span>Free Templates</span>
                    </a>
                </div>
            </div>

            <!-- Categories -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">Categories</div>
                <div class="sidebar-menu">
                    <a class="sidebar-menu-item active" onclick="filterByCategory('all')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                        <span>All Templates</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('business')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                        </svg>
                        <span>Business</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('portfolio')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <span>Portfolio</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('ecommerce')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"/>
                            <circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                        </svg>
                        <span>E-commerce</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('landing')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                        <span>Landing Pages</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('saas')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                        </svg>
                        <span>SaaS</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('blog')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                        <span>Blog & Magazine</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('agency')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        <span>Agency</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('restaurant')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8h1a4 4 0 0 1 0 8h-1"/>
                            <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
                            <line x1="6" y1="1" x2="6" y2="4"/>
                            <line x1="10" y1="1" x2="10" y2="4"/>
                            <line x1="14" y1="1" x2="14" y2="4"/>
                        </svg>
                        <span>Restaurant & Food</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="filterByCategory('education')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                            <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                        </svg>
                        <span>Education</span>
                    </a>
                </div>
            </div>

            <!-- My Account (shown when logged in) -->
            <div class="sidebar-section" id="sidebarAccountSection" style="display: none;">
                <div class="sidebar-section-title">My Account</div>
                <div class="sidebar-menu">
                    <a class="sidebar-menu-item" onclick="navigateTo('dashboard')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                        <span>My Library</span>
                    </a>
                    <a class="sidebar-menu-item" onclick="navigateTo('dashboard')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6"/>
                            <path d="m4.93 4.93 4.24 4.24m5.66 5.66 4.24 4.24"/>
                            <path d="M1 12h6m6 0h6"/>
                            <path d="m4.93 19.07 4.24-4.24m5.66-5.66 4.24-4.24"/>
                        </svg>
                        <span>Settings</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <!-- Sidebar Toggle -->
            <button class="sidebar-toggle" onclick="toggleSidebar()" id="sidebarToggle" aria-label="Toggle sidebar">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <a href="#" onclick="navigateTo('home'); return false;" class="logo">
                <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAPeUlEQVR42u3ceXxTZboH8N97Tk7S7N1bCqSUQtkpTsEFRqngFVmGpcgisiMic6+sgxsw6DiOO1eZGRlQBAtWNkHEK4poEXegFtkLlKWl+5amTZqcnJzn/pGmFGQQlEto7/v9fBr6oeHled/3Oe92TgpwHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHMdxHBd8LNgBXG/DX38J8eERXY45Pb2dEOjSygpMQIikdUXq9AcH2uJzil1O74IB/YMddtA0uwSY9u4amCWpx/f22m0lKmyXe48ARnrGSuN0Ies6REQ8Xy3LFekjhwc79KAQgh3A9XZP9254bfSDB6IM2tclxlQFAhR28ZfMGKsmisn1uOcdKi97rpfZrH/iw/8JduhB0ewS4IFuKXjsk224Iy5mTYwkfCbiwizAGn2BMchErEj2TPq0tGT0Czt3YHPumWCHf8M1uykAAMprqzHqvXcRb7X0zba7NlWpiCLGflZZAgBSES1Jx++IbTG8VpZz1owYFuzwb6hmNwIAQKTJiqGdO2D1qAe/aqWX3tIBAAF0yftY/WulV+54pKx0zv1tk6Q/79od7PBvqGY5AgTM+XArTBqxVWZx2dbzsq+nygJdfgGRPy1MDI7ORvOkrOLCD5anjcbAtq2DHf4N0SxHgICRt/XEWz8dOR8XonvWKDAHiAC6eBxgjAGMwUlkOe92LRzRrkOrrdlZwQ79hmnWCXBnTGvMv6sPHunZ45NYnTZDc5n3EAGMAAaGcsXX80BlxYwVacOE53d9Gezwb4hmPQUEjNu0ASZJare/vGpbmeLrjMCCkABiF3YGRAQLE8q6Gk2j8p3OL5daK6ANj0vQ+tzOOmdNaeeRc2BgzavJmtUIkFmYj9zqavGHsjxtVnme9lBJsfZQaal2UMcE3YphI3LbaKWXjICbEYHg73zAvzhUARBjqCE16kyd6893tW4dnS9ZoaktNWqKchbGyBVJZUvHobLqdLCreV01i3Resn0Hwg1GXebpk0NKne4RPrAICIyICSCCGKtVi24NtSyytWxdsfrEmbfzZM9Yr3Ch6tTwLYERg45AbUNCnto5ecILKwHcs3z6YqG2YqAYY5u1dOJr+5cU7ENoy17BrvZ10eQTYGbGu4gKkXSZeSVzimVlcZ0CI4EBgr9jrQKzdwq1LFg2bPjqeZ9+6jPrdLdk26s+KFcVG9UP54EEYIH1IRHCBKGgV3jEyCSl9Ifxoa5W6qHPt0P2WL2tOj5qm7hsh/3kDjUyaVCwq/+bNekpYMnOnUhpl2T8rrhi8Xm3Z4nTx4zEhPoOJVgZsyeZzfPef2jy29uOHvMN69QBq0aPyI7Vhfy3Hkz5+clAPcbgUNWWx+32P4lh7cynfth1nqJbvywqrjhd/pHVRWv+a4oi2TQFmauD3QS/mRjsAH6tWRs3wioKxo+O5Tx9usY13w1BxxrOeglmxiptetP8ZSMnpa/au1+d2+8ObFm5AnO2f4y2FktOqcuV4vD5EgMnhI2HQkb+NYFXpfZen1K4tlbYP71/6mm58FQ7yV5wu1BTmSoXHFW1ce2y5w3v5X11/efBbo5frUlOATMzMhBpMJh2n81fku/2zK4jSAIT/Ht6AGbGquO1urmr7uz/zj+OH1ZffDCt4d9W1dRg8IbNaGMx9z1UXb3JrvqiLm0GBoBAYATEiNKJnqGhQ291Hs1J1VV2053et01bW5Gg6MxeX3irVUKrLovIXlhhmLISoU1wh9DkpoCp6zfBag6zZuYX/S3f45njgSAJzF8NIoIJgiPBFPrU4gGD01eVFFzU+QAQZjZjRHJXvDtq5FexWt0bOmIE8nc2qFEqkH9XUKEqSSedtY+HdB+q/2nBq4coNG65qgkhQXZKYtnphyl335tkik6seWkQSitOBbt5rlmTStlJa9cj0mgM3VdQ8PI5l2uKl0gE/Cd5KhGMTKxN0JueeDK134ovz51V/vKHu/9tWVPWb4JZo4neW2XfXOTz3kmXuXqJCGAMFkGs66w3To32lqx/IsYTLRz8bKOmprgvIwKYAMUc8x1aJ8+uevzlfS2/PoTQNt2C3VRXrcmMANPe24hYqyni27y8F/Oczileghg4wiEiGJngSjRb/vLHPnetzMw/d8XOB4BJvXphd2FRaaLZ9JKZCdUgargaAkvDwJRS41P0Z5w1f/IZ4mzZp8+WIiZhqaozOgEAqg8aR9Ed7FzWOsszf7zXG9+VFe77KNjNddWaRAKMfXM1dLISsefs2VcL3e7pHjAxsHQjEAxMcLU3Gp7+z1u6vn60MNf718Gpv1hmamIbPNgjGQtvv/2TGJ3ubYn5Z/5LdwYM/m1iFflScuuc8zpO+4fGcte4nWSJ3UFMAGP+KCRnWZJUfHSNsnbuZEP7npryfVuC3WxX5aafAh5N34Awrdayq6DwtQLFM9lLYIG5mhigZ4IrQW96enxyt9ePV1TJL6Tdd03lj9+8FWZJm7C3vOTjMkXuSBDAAufD9QgAIxVhIivtZrEOuK9q34F+BtdI8fT+DNHr0l5oSAbFEO6Qo5KWKClj3hBKT8rxA2cGuwmv6KYfAX4sL8H+yvK+JYo8TiH/KT5jDMQYRACxOu2yxXf0f+1wmf2aOx8AHujTG8uHDT5jFIUvBDAExoFLERhcKkU5vO6uB8QwQPYeZEA5AAQeNWFEkJwVFqnk+LMse+sA5cjNvz3U/PYi/m/5mAomQktQxcaXJQPAmABFYCiqOwKHp+JXle+pdgATJ0DxkRvkT6zLj4sMBGKKAKYwBmICgQKPmTQ6USSAVB9TVcBHN/31dfOPAF1jopEUEZoZpdW8r2HsoqvTR0Cp2zNr+eHzc/on2rSLPtx6zeXvOnIUj6WNjXEr6l3KpUfCDfxrAwNjFeEa7dEU1EAVhS7EKIqhPiZiAAHeEFOtHJnwjNLl7k/F9inBbr5fdNMnwFvjxuFYSWllt5jw2REiS5caPdLBGCCrMBTUep5efeDk7J4tY7TP7th+1WW/+s33+GfaUHao1vGIHerle6v+P5NAiJS0m6b2+P2hMRMWScxeNowpslYl1hCQ1xhR6WvV/XFtv8mvWdyFcuLwx4PdfL+oSRwFn/r4YyTcO8BpM+m+citqrNtHySoYCwy/CkGqlZXeR0vK7EOSk360DRqifpux/oplZp/Pw9J9Wdidl5+a46h+yUmqqWEur3+h+j8ZARGicDQ5NHROzOGNpVFndt8nFZ5YLHrrdP73MMjGqFw5rtPM2Cn/Ws8qTykRvR4MdrNdlZt+BAh4f8YjcPpQkRxlnt9CL6VLDKTiwsbNqZIx3yX/9e/f/DRjUI8umj9/seuK5f3r4I+4s3WE9WRV+YJq1ReNSw6CAjM7I4Iegidao3351KnsE7cnJYb7Ck7OE9wOi/9NAryWmP3UpsckNmX59vKz3/ksHQYEu7muWpNJAADYNH06FEGq6BMfOz/eoE3X1R/WBYbgOhWW8w7X317YsefhwYkJ4jO7Lp8EG479hBWDhiO7tGpKuazcGzj3/zmCBgyxWu1H98THb15weAVwYu94yV6cCvLBJ0pQwm2fq0kpE32Okm+MOTvQIqF3sJvpmtz05wCXMzNjHaKN+og9eaWvnHF6JnjIP5Wx+sMcoyhUJ5iNcz+dMfWdZZm71dn9LpwKEhEGr0tHtMnwu+yK6q2VPtV20e6i/tL3L+wIEYKYnxIenpZcm7t/iM7eKST3u22Ss6S9IoX45FDbWrHtbQu9Zw4Utp6VDo0oBbtprlmTGgEClo8bj3PVdRV9WsfNbaXXrdQx5rvwUwanj6x5ta5Xhqxc9cCsu1PZym++bfjpY5/vRGqCzXTCXvuEXSEbAwOrvxkU6PzAvKJjTGmh0y5dtfy5/Wn97tRJpcfna1zl7RWt3umNTnxR2z11jqg6ChPmvtckOx9ooiNAwLSM9Yg1Gqx7zhU9e97lnukhaFhgBQeCWRLKu0dFLNgw4YH0DYcOqxqDhPvnLsKAcWkP5Tpc/3QTtAwExhrt5eHf8QsERGmkD3/fInbikJyM6sRQ67CQvKx1qiCQEt12odK97wqhokhu84fFwW6G36RJJwAAzNj4PiKNevOeU/mLC13uRz0MIYHVOxFg1YqVNoP+kU9mTN08ettWCjXou/9wvnhLlexL9JdwSQL4z31hBYo6GsxpHaj8++kRcqzm4O4touyM88V3eDJs3MLN8on93rCuw4Nd/d+sSWwDryRr00Yk/scgOcFq+lqWvTlaJqiMfPmSgJM6gZ1iKhXrfUr4yTO5Wfd3aC9vy819vtgj302M+W/kNOr8+okfEgPZDIZXt48fl9Ev+VZm/zL9MdQ521Fku2m5D73xifWBEWpkl6az0r+SJj8CBBARGGPY/v0xzd7cY0Id80IVNAgRJDjcdvb3CRPkoesyRp5y1b7jBAwE9m9u+hBaSJrMvrEtxv6uJr+0E9V10tWcnWnQs+WsrOAYBk5G604Dg13d66bZJMCVjFq3ARZJsmVVV2ypVCnFv8q/zKeFiWAEK+ugM4zNra7+4k2zE1JMS5tYa3d53O7ynpNmQcNu+tsn16TZJ8Bze75HapxNemrPZy/nye7ZCmMAsYvOfaj+VQJg02ifz+x7/6IFB/eor6Q1/ce+f0mzToCPThfise0foFNU9JBjNfZ1NVCtDZv8RjVn9XN/lIZ90zs8cozd6y1YO2Z0sMO/IZrkOcDV2pS1F3fH21qcdTqerCWyBu7cM9BFvy2EGMEkiI4EU9iLP1TVFIxtkxDs0G+YZpsAL2R+jTX3DxNy7FUzq1Sld8OHQMl/Yhj4HvA/FBEliKseTkre0b9lPAbf1jw+9nU1muUUUF5Ti+EZGxBvtfb9yWHfVK1SlP+uHjV0fgARIRzijz0M5jSH13vu/WlN4y7e9dIsR4DFmXvQp02b8NOu2oW1Pl8UA4HVP+LdGBFBz5gr3mB4JdNedC41sXOwQ7/hmteeBsCGgwcxpnt3DEhfO7VM9vRT6/++8bov8CSXBFCsKL01LK7lli5hYXg09ZZgh3/DNbspYOLad2CUND2zHK4PylVq2fgur/85QgaBQHomlIRrhLe7R0Ystbs9FeljRgU79KBodiOAAIJBFMUEi2VVK8Yu+t1gDIBK5KurU87G6k0HUkItxyq9XmXZmKHBDpvjOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7jOI7juP/X/hdZvjjUtNWKxAAAAABJRU5ErkJggg==" alt="DeployTemplate" class="logo-image" />
                <span class="logo-text"><span class="logo-text-deploy">Deploy</span><span class="logo-text-template"><span class="logo-text-template-inner"><span>T</span><span>e</span><span>m</span><span>p</span><span>l</span><span>a</span><span>t</span><span>e</span></span><span class="logo-text-template-cursor"></span></span></span>
            </a>
            
            <!-- Navbar Search -->
            <div class="nav-search-wrapper">
                <div class="nav-search">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" id="navSearch" placeholder="Search templates..." autocomplete="off">
                </div>
                <div class="search-suggestions" id="navSearchSuggestions"></div>
            </div>
            
            <ul class="nav-links" id="navLinks">
                <li><a href="#templates" onclick="event.preventDefault(); scrollToSection('templates');">Templates</a></li>
                <li><a href="#features" onclick="event.preventDefault(); scrollToSection('features');">Features</a></li>
                <li><a href="#showcase" onclick="event.preventDefault(); scrollToSection('showcase');">Showcase</a></li>
                <li><a href="#pricing" onclick="event.preventDefault(); scrollToSection('pricing');">Pricing</a></li>
                <li>
                    <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle" aria-label="Toggle theme">
                        <span class="theme-toggle-slider" id="themeIcon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                        </span>
                    </button>
                </li>
                <li>
                    <div class="cart-icon-wrapper" onmouseenter="showCartDropdown()" onmouseleave="hideCartDropdown()">
                        <div onclick="toggleCartModal(); event.stopPropagation();">
                            <svg class="cart-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" stroke-width="2">
                                <circle cx="9" cy="21" r="1"/>
                                <circle cx="20" cy="21" r="1"/>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                            </svg>
                            <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
                        </div>
                        
                        <!-- Cart Dropdown -->
                        <div class="cart-dropdown" id="cartDropdown">
                            <div class="cart-dropdown-header">Shopping Cart</div>
                            <div id="cartDropdownItems">
                                <div class="cart-empty">
                                    <div class="cart-empty-icon"></div>
                                    <div class="cart-empty-text">Your cart is empty</div>
                                    <div class="cart-empty-subtext">Any templates you add to your cart will be displayed here.</div>
                                </div>
                            </div>
                            <div id="cartDropdownFooter" style="display: none;">
                                <div class="cart-total">
                                    <span>Total:</span>
                                    <span id="cartDropdownTotal">$0</span>
                                </div>
                                <div class="cart-actions">
                                    <button class="btn btn-secondary btn-block" onclick="toggleCartModal();">View Full Cart</button>
                                    <button class="btn btn-primary btn-block" onclick="proceedToCheckout();">Checkout</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
            <div class="nav-cta" id="navCta">
                <!-- Buttons added by JavaScript -->
            </div>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content Wrapper -->
    <div class="main-content">

    <!-- HOME PAGE SECTION -->
    <div id="homePage" class="page-section active">

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">
                    <span class="badge-dot"></span>
                    New templates added monthly
                </div>
                <h1 class="hero-title">
                    Launch Your Website in
                    <span class="gradient-text">Minutes, Not Months</span>
                </h1>
                <p class="hero-description">
                    Premium, production-ready templates built with modern design principles. 
                    Simply customize, deploy, and start growing your business today.
                </p>
                <div class="hero-buttons">
                    <a href="#templates" class="btn btn-primary btn-lg">
                        Explore Templates
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    <a href="#preview" class="btn btn-secondary btn-lg">
                        See Live Demo
                    </a>
                </div>
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-number">500+</div>
                        <div class="stat-label">Happy Customers</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">15+</div>
                        <div class="stat-label">Premium Templates</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">4.9</div>
                        <div class="stat-label">Average Rating</div>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="template-showcase">
                    <div class="showcase-card" style="--delay: 0s">
                        <div class="card-header">
                            <div class="browser-dots">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                        <div class="card-preview">
                            <div class="preview-gradient gradient-1"></div>
                        </div>
                    </div>
                    <div class="showcase-card" style="--delay: 0.2s">
                        <div class="card-header">
                            <div class="browser-dots">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                        <div class="card-preview">
                            <div class="preview-gradient gradient-2"></div>
                        </div>
                    </div>
                    <div class="showcase-card" style="--delay: 0.4s">
                        <div class="card-header">
                            <div class="browser-dots">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                        <div class="card-preview">
                            <div class="preview-gradient gradient-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero-background">
            <div class="bg-gradient bg-gradient-1"></div>
            <div class="bg-gradient bg-gradient-2"></div>
            <div class="bg-grid"></div>
        </div>
    </section>

    <!-- Templates Grid Section -->
    <section class="templates-section" id="templates">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">
                    Choose Your Perfect Template
                </h2>
                <p class="section-description">
                    Each template is carefully crafted with modern design, optimized performance, and mobile-first approach
                </p>
            </div>

            <!-- Search & Filter Bar (from Browse) -->
            <div class="browse-controls">
                <div class="search-box">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" id="templateSearch" placeholder="Search templates..." autocomplete="off">
                    <div class="search-suggestions" id="browseSearchSuggestions"></div>
                </div>

                <div class="filter-group">
                    <select id="categoryFilter" class="filter-select">
                        <option value="all">All Categories</option>
                        <option value="saas">SaaS & Startups</option>
                        <option value="portfolio">Portfolio & Creative</option>
                        <option value="business">Business & Local</option>
                        <option value="ecommerce">E-commerce</option>
                        <option value="landing">Landing Pages</option>
                    </select>

                    <select id="sortFilter" class="filter-select">
                        <option value="newest">Newest First</option>
                        <option value="popular">Most Popular</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                    </select>
                </div>
            </div>

            <!-- Dynamic Templates Grid -->
            <div id="browseTemplatesGrid" class="templates-grid">
                <!-- Templates will be loaded here dynamically -->
                <div class="loading-state">
                    <div class="loader"></div>
                    <p>Loading templates...</p>
                </div>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="browsePagination" style="display: none;">
                <button class="pagination-btn" id="prevPage"> Previous</button>
                <div class="pagination-pages" id="paginationPages"></div>
                <button class="pagination-btn" id="nextPage">Next </button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section" id="features">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Everything You Need to Succeed</h2>
                <p class="section-description">
                    Our templates come packed with features that help you launch faster and grow bigger
                </p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2"/>
                            <path d="M8 21h8M12 17v4"/>
                        </svg>
                    </div>
                    <h3>Fully Responsive</h3>
                    <p>Every template looks perfect on desktop, tablet, and mobile devices. Your visitors get a great experience everywhere.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                    </div>
                    <h3>Launch in Minutes</h3>
                    <p>Download, customize your content, and deploy. No complex setup or technical knowledge required.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                    </div>
                    <h3>Blazing Fast</h3>
                    <p>Optimized code and lightweight design ensures your site loads instantly. Better SEO, better conversions.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2v20M2 12h20"/>
                        </svg>
                    </div>
                    <h3>Easy to Customize</h3>
                    <p>Clean, well-organized code with helpful comments. Change colors, fonts, and content with ease.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                    </div>
                    <h3>Complete Documentation</h3>
                    <p>Step-by-step guides and video tutorials help you get started and customize your template perfectly.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                    </div>
                    <h3>Premium Support</h3>
                    <p>Stuck on something? We're here to help. Email support included with every purchase.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Showcase Section -->
    <section class="showcase-section" id="showcase">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Built with DeployTemplate</h2>
                <p class="section-description">
                    See how businesses are using our templates to create stunning websites
                </p>
            </div>

            <div class="showcase-grid">
                <div class="showcase-item">
                    <div class="showcase-image">
                        <div class="showcase-placeholder"></div>
                    </div>
                    <div class="showcase-info">
                        <h4>TechFlow Analytics</h4>
                        <p>SaaS Landing Template</p>
                    </div>
                </div>

                <div class="showcase-item">
                    <div class="showcase-image">
                        <div class="showcase-placeholder"></div>
                    </div>
                    <div class="showcase-info">
                        <h4>Sarah Chen Design</h4>
                        <p>Portfolio Template</p>
                    </div>
                </div>

                <div class="showcase-item">
                    <div class="showcase-image">
                        <div class="showcase-placeholder"></div>
                    </div>
                    <div class="showcase-info">
                        <h4>Bistro 42</h4>
                        <p>Restaurant Template</p>
                    </div>
                </div>

                <div class="showcase-item">
                    <div class="showcase-image">
                        <div class="showcase-placeholder"></div>
                    </div>
                    <div class="showcase-info">
                        <h4>FitLife Coaching</h4>
                        <p>SaaS Landing Template</p>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Launch Your Website?</h2>
                <p>Join hundreds of businesses who chose DeployTemplate to bring their vision to life</p>
                <div class="cta-buttons">
                    <a href="#templates" class="btn btn-primary btn-lg">Browse Templates</a>
                    <a href="#pricing" class="btn btn-white btn-lg">View Pricing</a>
                </div>
            </div>
        </div>
    </section>


    <!-- Pricing Section -->
    <section class="pricing-section" id="pricing">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Simple, Transparent Pricing</h2>
                <p class="section-description">
                    Launch sale: Get 43% off all templates. Limited time offer!
                </p>
            </div>

            <div class="pricing-grid">
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Single Template</h3>
                        <p>Perfect for one project</p>
                    </div>
                    <div class="pricing-price">
                        <div class="price-original">$69</div>
                        <div class="price-current">
                            <span class="currency">$</span>39
                        </div>
                        <div class="price-label">per template</div>
                    </div>
                    <ul class="pricing-features">
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Complete template files
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Setup documentation
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Lifetime updates
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Commercial license
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Email support
                        </li>
                    </ul>
                    <a href="#templates" class="btn btn-outline btn-block">Choose Template</a>
                </div>

                <div class="pricing-card featured">
                    <div class="pricing-badge">Best Value</div>
                    <div class="pricing-header">
                        <h3>Complete Bundle</h3>
                        <p>All current + future templates</p>
                    </div>
                    <div class="pricing-price">
                        <div class="price-original">$179</div>
                        <div class="price-current">
                            <span class="currency">$</span>99
                        </div>
                        <div class="price-label">one-time payment</div>
                    </div>
                    <ul class="pricing-features">
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            All 15+ templates
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Access to new templates
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Priority email support
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Lifetime updates
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Commercial license
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Video tutorials
                        </li>
                    </ul>
                    <a href="#" class="btn btn-primary btn-block">Get All Templates</a>
                </div>

                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Custom Development</h3>
                        <p>Need something unique?</p>
                    </div>
                    <div class="pricing-price">
                        <div class="price-current" style="font-size: 2.5rem;">
                            Custom
                        </div>
                        <div class="price-label">starting at $299</div>
                    </div>
                    <ul class="pricing-features">
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Template customization
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Brand integration
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Content writing
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Deployment assistance
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Dedicated support
                        </li>
                    </ul>
                    <a href="/cdn-cgi/l/email-protection#f5969a9b81949681b58190988599948190939a879290db969a98" class="btn btn-outline btn-block">Contact Us</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-logo">
                        <img src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAACkkAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAABAAAAAQAAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQUMAAAAABNjb2xybmNseAACAAIAAgAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAClFtZGF0EgAKBxlmf//8IAgyuxQRcAFFFFEgggC0nfjiHvIOv4eEvNs7OVuln1sLPPhhjCo6vHl9cmGUMxMteC4D3ATLx8ZJ7apN6pRYe3yZYk/6TvzchVBdxaWHPNf6zKcjNOHtbsrURWTNxn0oERz9Cs9PyjW/wOcOyvcCylwK0gn3JNfRgBWpwT3fOUNjRMidno5TDaQVZalZnMedoRc6KG0Dmbu7p3bp+MWFAATqqV2q2P9fRSeHOropxPqQXrlYatpOFWqDMviPhREIw7+1xhuM9IEEs4KjzSNAphrdKjS5H8w19mXG9QcsRy4NjqIAO5G/43GRKPX7JC/XfA8T+jpXQ43N2pv5qMs9pdRCp8UgWDJQjtywTSLw2k481zUJ7jJ59cjBtFAnWIY/jf6k/V82v2ybxm1owSRPSp+KBiMj6bmuHhp/pUPbZZd0PwUoDEi+DwEt3l+Bqw7ki6XSTQXWEZYaLcoEm09eeiWZ+R+xzNqZl8MUVOYk4+KTaC4iw2Aeez4swHo9KUsvzrYzuiN6+gyybehNTzZuYxvYEqnUagJDQAzyX9UqpblMEV10dw7KfmuDQrS1342sLzUt5wYraDFIXeCMvVMYTAYN6nDohMaBHbc64WSp41zLWfJRIIboPJXae34XUdnH6e4weK99py5jbq42wR2qHUmfQQIGrJg9HByY7SphglkJPB1flFeYsKk7aAXo+w5BkYrphYwk4beZsdH7Ykak8BVRvFskTes/q5FxTpJ4AhFiykJV5ITgHZ8mg4HErHgyVDNdN4zuZNLxbzlC1Y7CtLSS3gLJV+JDF2fskN20GRBUEv62zjsT8JXDVdm7nWylQAYc061W/2w+5OuUshFvJxbzIhGOifKmMJtM7nniDyEdQNd28P6HyDxIGWXnvBJf6KV2QqDb/HZORa/MC3GNhhWlbsHNUEKx1/O9EtoWqwbtg9deyNzSUP6wsFPf04NRgw894e4TO7S6h2y/kF04+QLPsO7sIM5QWX3E+DL2vYCRWekTRbAv/37jDTRzjvc8AAAAACnI7jFVp88Ugg/9LxVHgaGjh87+YEPGKPwcZJ9hz7tMh+NzbybwfeWBVptq2NvySF9ZmSQg3Fb5G4QG/5qcl39JjBl54mIMUh+SIdXpGe0M/v6yYMS1lH3UEzET6g41szQipa29rFVu3S8IaBLOCTdn11ufohwyVUmRseiBZKNt5DJHbPcLWPU+zvEKx6XybQd5JD6h0oOmM89NayKPOuSf3D8uX7ESrzoWP8csB9QgXR0FPqPxHSSu7jlOyKHVYBjD8Gr2nQfIlFNiM80AfM+A7iKfhnlBZjEKq9V6Pb7fHy5CzPOsrwDiyZNpLgVDi4iOzGoXGW300GT7ks9KTBziXTQOnNnuF/VugbQmAuon+xIp6j5ZqnwZ8GO2aTi1Wqod0Q94abX/U8BWl0WJZ1SyDakg9VpWxzlkIB0eIwQ81hdBGlVH7EaRsaZxlCOdajAP+BoDMXH/GE7MKzycGp/SL9xwOUkdKFx7e/1wZM6+zxtw/PHVA7YgQHpCsWYm5+lzcB31kZH32ph42vhi3EFzI6BwyVsczJE6yi3PCUQ6llXhCU7U1JQw/RP/3kSnBl6IyTTzF0qAW3uDG6nQJ9+sS1G7Fvjy5FEiV30evCzyJAHc/w/EkfWidBMMTeU/U9IgojB5pNfy7fV9mkGBwK4HrJ7t3JnuTvGLYbYxV5UdDoFg9EUQx4VvxN1ZK67ep27ExXB1OVZOzyf9LbCpQR37NANz4brU0mRekvJi3k0iYF5dHzi7ARa4L1JM0fz79w7SCKVVQ3Lue1snlKlDbHeHkXBkAY8f27JnFgTJRdLRmgg71RC8EiGAg+XA86jKofwsewZF1hlcNGDkhU9ogHpqdfUvIOxb1Gy0jKqZCbmOF/ywCG4GONjbwfY+GOQfFaf+h2RCEwHNCtL3FHmzl1Jm2UgXP5OoIvOk6Cb5kKQierUMkoEwsIXhQTzvTUYZBYB2IwsRUDokfzbyae0QVHIHkWcUTdS83UIES+Ivi9vB0ObbnGC8BTyl6uZL2qFZq8BH4p3kR0KRrOWfOv+gvZyLqvnW9s5phQhZg+TpYhBF2piRwZ6s+hOcrq2XXbxfu4wYd0hvLJmINwVRe3xtr3/ygRS5vL2IDkjdJLpUBF/cFlr2j3rrI3RI/UjDlUtBzL1DtKDXgnUKxwDdUBgABkx3a9Wo7llHcWRy/9ssRBdTOsRbDk5j50kN9XE9zPJV0GTa0OZG5l5sRnFzLTHFRTzFpt89MsSkulMeyyx6TIJC8Zu4UcQl/SMCNvGF+5TAHEmb4guao9vfHqCG8vG07mhKKqfCx0Yn3tp6WAMuZ28slSs37RaJrryXBkyH9vJpg20JTVene/87hcND8mm/cECiMgZOjlaaOJgRumNQ5NDsU1fKY5Bbeo3xei3wii90jlV1jPWp2J5sBpBdMqMiLtxtAn47P8uV31JtnBVW9i6hNvYw+JALhK5nHrrsXMgAZQ7m7+R+B30EKKSfLPdycqtRH3Pu3BE7ayyTljm5sZMG8FqOhknHzqScX0snf+T/FlQ0ljITqthdzpSns+3gVpaBVNr8loYGjrgVvzGC/c2OrkkRudDcHcMIGHXuM7QRXCv8bm6rpCAAATceq+cT4aTJ6FoZnacdD6m7+UH5bbzRO7WzV+ayOqeKlWVVr52rFmCcXfbAGMQk7Cr7NzOz4aPv/J8hAvQ3Yfrq7O2OIQvrQH4OQto1LlItglbtalVgGx4lotkN4gNiooK+IlxWMP1vjmlFp7c3G/uAH00//7zxpxwYAzHYKXBWrbtXpY8SLm2jl0/lfCXe4O5KvKvMNDwI3Glb66pkleY24FRIEMRZZw6oSTKtokTbzKpqjmWMjCHU/N5E5CTNvpqQEmcfNDg9bbiPfGZYAm0Nryb3gqD2sJd/5YCE0O049/6a21AqH6fzv6b1SBH4i0yQzsixtpHBIvKiStL3OAbfQ+qLl9VDbspgUFUkKPS4bJJMV7IpVan39yj7iIJ7gXRJX2X5ozR17B+ldF54Gz+12GJAzx+YBs4cNjUXTsCF0F2WZ1FhL08djL4JLEZZF7gvxo6slsu+wWGYa+Clt0a3VbVdFJXP5BVKAGxohbFCf4x8anfDz6eXCks7dlKoluuZUIH1p97x4IfmygDIlKaOzYOjiBEKwGEQl8BwzMzYXnLH1KPkULpHOWXplr8kd4DPSGXV30UPlbJAzeqIOk9U1sNlPEt1jkKE7Cwy8HBMVmAIHuPr70L14zCh7Q+ITglf5quyDBoRHRKh40m9u7Io8z6PYOtWKzj7Qtvgym0QtMHBX/kkraHkCNTqRJ6KB+iLcATSd97S9JFw+mHOFf96V50S9ZALRckS13QfQAB8/Ty3WZWcn6xNu+uDPL92WRCAY2XR6DbA7bdr0+oP5WAY8uozXB4oKpOdIfk832bM0YRXDK63YQ0+Wf7VvSDFpVU6+yc7imxFHShYLulSN8gQ2JQ=" alt="DeployTemplate" style="width: 32px; height: 32px; object-fit: contain;" />
                        <span>DeployTemplate</span>
                    </div>
                    <p>Premium website templates for modern businesses. Launch faster, grow bigger.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Twitter">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                            </svg>
                        </a>
                        <a href="#" aria-label="GitHub">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z"/>
                            </svg>
                        </a>
                        <a href="#" aria-label="LinkedIn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <div class="footer-column">
                    <h4>Templates</h4>
                    <ul>
                        <li><a href="#templates">All Templates</a></li>
                        <li><a href="#templates">SaaS & Startups</a></li>
                        <li><a href="#templates">Portfolio</a></li>
                        <li><a href="#templates">Business</a></li>
                        <li><a href="#templates">E-commerce</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#showcase">Showcase</a></li>
                        <li><a href="#pricing">Pricing</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="/cdn-cgi/l/email-protection#94f7fbfae0f5f7e0d4e0f1f9e4f8f5e0f1f2fbe6f3f1baf7fbf9">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">License</a></li>
                        <li><a href="#">Refund Policy</a></li>
                        <li><a href="/cdn-cgi/l/email-protection#1b686e6b6b74696f5b6f7e766b777a6f7e7d74697c7e35787476">Get Help</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 DeployTemplate. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Cookies</a>
                </div>
            </div>
        </div>
    </footer>

    </div>
    <!-- END HOME PAGE SECTION -->

    <!-- TEMPLATE DETAIL PAGE -->
    <div id="template-detail-page" class="page-section">
        <div class="template-detail">
            <div class="container">
                <!-- Back Button -->
                <button class="back-btn" onclick="navigateTo('home'); setTimeout(() => document.getElementById('templates').scrollIntoView({behavior:'smooth'}), 100);">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Templates
                </button>

                <!-- Template Header -->
                <div class="detail-header">
                    <div class="detail-header-content">
                        <div class="detail-badge" id="detailBadge"></div>
                        <div class="detail-category" id="detailCategory"></div>
                        <h1 class="detail-title" id="detailTitle"></h1>
                        <p class="detail-description" id="detailDescription"></p>
                        
                        <div class="detail-meta">
                            <div class="meta-item">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                <span id="detailDownloads">0 downloads</span>
                            </div>
                            <div class="meta-item">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                                </svg>
                                <span>4.9 rating</span>
                            </div>
                            <div class="meta-item">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                <span id="detailUpdated">Updated recently</span>
                            </div>
                        </div>

                        <div class="detail-actions">
                            <div class="detail-price">
                                <span class="price-label">Price:</span>
                                <div>
                                    <span class="price-original" id="detailPriceOriginal"></span>
                                    <span class="price-current" id="detailPriceCurrent"></span>
                                </div>
                            </div>
                            <button class="btn btn-secondary btn-lg" id="detailBuyBtn" onclick="buyTemplateFromDetail()">
                                Buy Now 
                            </button>
                            <button class="btn btn-primary btn-lg" id="detailPreviewBtn">
                                Live Preview
                            </button>
                        </div>
                    </div>

                    <div class="detail-preview" id="detailPreview">
                        <!-- Preview will be loaded here -->
                    </div>
                </div>

                <!-- Template Features -->
                <div class="detail-section">
                    <h2>Features</h2>
                    <div class="feature-list" id="detailFeatures">
                        <!-- Features loaded dynamically -->
                    </div>
                </div>

                <!-- Template Screenshots -->
                <div class="detail-section">
                    <h2>Screenshots</h2>
                    <div class="screenshots-grid" id="detailScreenshots">
                        <!-- Screenshots loaded dynamically -->
                    </div>
                </div>

                <!-- What's Included -->
                <div class="detail-section">
                    <h2>What's Included</h2>
                    <div class="included-list">
                        <div class="included-item">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <div>
                                <h4>Complete Source Code</h4>
                                <p>All HTML, CSS, and JavaScript files fully customizable</p>
                            </div>
                        </div>
                        <div class="included-item">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <div>
                                <h4>Lifetime Updates</h4>
                                <p>Get all future versions and improvements for free</p>
                            </div>
                        </div>
                        <div class="included-item">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <div>
                                <h4>Documentation</h4>
                                <p>Detailed setup guide and customization instructions</p>
                            </div>
                        </div>
                        <div class="included-item">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            <div>
                                <h4>Premium Support</h4>
                                <p>Email support for any questions or issues</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tech Stack -->
                <div class="detail-section">
                    <h2>Tech Stack</h2>
                    <div class="tech-stack" id="detailTechStack">
                        <!-- Tech stack loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END TEMPLATE DETAIL PAGE -->

    <!-- LOGIN MODAL -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('loginModal')" aria-label="Close">&times;</button>
            <h2>Welcome Back</h2>
            <p>Sign in to access your templates</p>
            
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required placeholder="you@example.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required placeholder="" autocomplete="current-password">
                </div>
                <div class="form-error" id="loginError"></div>
                <button type="submit" class="btn btn-primary btn-block" id="loginBtn">
                    Sign In
                </button>
            </form>
            
            <div class="form-link">
                Don't have an account? <a onclick="closeModal('loginModal'); showSignup()">Sign up</a>
            </div>
        </div>
    </div>

    <!-- SIGNUP MODAL -->
    <div id="signupModal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('signupModal')" aria-label="Close">&times;</button>
            <h2>Get Started</h2>
            <p>Create your account to access premium templates</p>
            
            <form onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" required placeholder="John Doe" autocomplete="name">
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" required placeholder="you@example.com" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" required placeholder="" minlength="6" autocomplete="new-password">
                    <small style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.25rem; display: block;">Minimum 6 characters</small>
                </div>
                <div class="form-error" id="signupError"></div>
                <button type="submit" class="btn btn-primary btn-block" id="signupBtn">
                    Create Account
                </button>
            </form>
            
            <div class="form-link">
                Already have an account? <a onclick="closeModal('signupModal'); showLogin()">Sign in</a>
            </div>
        </div>
    </div>

    <!-- ADMIN MODAL -->
    <div id="adminModal" class="modal-overlay">
        <div class="modal" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
            <button class="modal-close" onclick="closeModal('adminModal')" aria-label="Close">&times;</button>
            <h2> Admin Panel</h2>
            <p>Manage templates and site content</p>
            
            <!-- Tab Navigation -->
            <div style="display: flex; gap: 1rem; margin: 2rem 0 1rem; border-bottom: 2px solid var(--border-color);">
                <button onclick="showAdminTab('add')" id="adminTabAdd" class="admin-tab active" style="padding: 0.75rem 1.5rem; background: none; border: none; border-bottom: 2px solid var(--primary); color: var(--primary); cursor: pointer; font-weight: 600;">Add Template</button>
                <button onclick="showAdminTab('manage')" id="adminTabManage" class="admin-tab" style="padding: 0.75rem 1.5rem; background: none; border: none; border-bottom: 2px solid transparent; color: var(--text-secondary); cursor: pointer; font-weight: 600;">Manage Templates</button>
                <button onclick="showAdminTab('hero')" id="adminTabHero" class="admin-tab" style="padding: 0.75rem 1.5rem; background: none; border: none; border-bottom: 2px solid transparent; color: var(--text-secondary); cursor: pointer; font-weight: 600;">Hero Images</button>
            </div>

            <!-- Add Template Tab -->
            <div id="adminTabAddContent" class="admin-tab-content">
                <h3 style="color: var(--primary); margin-bottom: 1rem;">Add New Template</h3>
                <form id="adminAddTemplateForm" onsubmit="handleAdminAddTemplate(event)">
                    <div class="form-group">
                        <label>Template Name *</label>
                        <input type="text" id="adminTemplateName" required>
                    </div>

                    <div class="form-group">
                        <label>Slug *</label>
                        <input type="text" id="adminTemplateSlug" required placeholder="e.g., modern-portfolio">
                    </div>

                    <div class="form-group">
                        <label>Category *</label>
                        <select id="adminTemplateCategory" required style="padding: 0.75rem; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                            <option value="">Select...</option>
                            <option value="Portfolio">Portfolio</option>
                            <option value="Business">Business</option>
                            <option value="E-commerce">E-commerce</option>
                            <option value="Landing Page">Landing Page</option>
                            <option value="Blog">Blog</option>
                            <option value="SaaS">SaaS</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Description *</label>
                        <textarea id="adminTemplateDescription" required style="min-height: 80px;"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Price ($) *</label>
                        <input type="number" id="adminTemplatePrice" required min="0" step="0.01" value="0">
                    </div>

                    <div class="form-group">
                        <label>Preview Image *</label>
                        <input type="file" id="adminTemplatePreviewImage" accept="image/*" required>
                    </div>

                    <div class="form-group">
                        <label>Template ZIP *</label>
                        <input type="file" id="adminTemplateZipFile" accept=".zip" required>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="adminTemplateIsPopular" style="width: auto; margin: 0;">
                            Mark as Popular
                        </label>
                    </div>

                    <div class="form-error" id="adminError"></div>
                    <button type="submit" class="btn btn-primary btn-block" id="adminAddBtn">
                        Add Template
                    </button>
                </form>
            </div>

            <!-- Manage Templates Tab -->
            <div id="adminTabManageContent" class="admin-tab-content" style="display: none;">
                <h3 style="color: var(--primary); margin-bottom: 1rem;">Existing Templates</h3>
                <div id="adminTemplatesList" style="display: grid; gap: 1rem;">
                    <p style="color: var(--text-muted);">Loading templates...</p>
                </div>
            </div>

            <!-- Hero Images Tab -->
            <div id="adminTabHeroContent" class="admin-tab-content" style="display: none;">
                <h3 style="color: var(--primary); margin-bottom: 1rem;">Hero Section Images</h3>
                <p style="color: var(--text-muted); margin-bottom: 1rem;">Upload images to display in the hero section carousel</p>
                <form id="adminHeroUploadForm" onsubmit="handleAdminHeroUpload(event)">
                    <div class="form-group">
                        <label>Hero Image *</label>
                        <input type="file" id="adminHeroImage" accept="image/*" required>
                    </div>
                    <button type="submit" class="btn btn-primary" id="adminHeroBtn">
                        Upload Hero Image
                    </button>
                </form>
                <div id="adminHeroImagesList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 2rem;">
                    <p style="color: var(--text-muted);">Loading hero images...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Template Modal -->
    <div id="editTemplateModal" class="modal-overlay">
        <div class="modal" style="max-width: 700px; max-height: 90vh; overflow-y: auto;">
            <button class="modal-close" onclick="closeModal('editTemplateModal')" aria-label="Close">&times;</button>
            <h2>Edit Template</h2>
            
            <form id="editTemplateForm" onsubmit="handleEditTemplate(event)">
                <input type="hidden" id="editTemplateId">
                
                <div class="form-group">
                    <label>Template Name *</label>
                    <input type="text" id="editTemplateName" required>
                </div>

                <div class="form-group">
                    <label>Category *</label>
                    <select id="editTemplateCategory" required style="padding: 0.75rem; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                        <option value="Portfolio">Portfolio</option>
                        <option value="Business">Business</option>
                        <option value="E-commerce">E-commerce</option>
                        <option value="Landing Page">Landing Page</option>
                        <option value="Blog">Blog</option>
                        <option value="SaaS">SaaS</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Description *</label>
                    <textarea id="editTemplateDescription" required style="min-height: 80px;"></textarea>
                </div>

                <div class="form-group">
                    <label>Price ($) *</label>
                    <input type="number" id="editTemplatePrice" required min="0" step="0.01">
                </div>

                <div class="form-group">
                    <label>New Preview Image (leave empty to keep current)</label>
                    <input type="file" id="editTemplatePreviewImage" accept="image/*">
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" id="editTemplateIsPopular" style="width: auto; margin: 0;">
                        Mark as Popular
                    </label>
                </div>

                <div class="form-error" id="editError"></div>
                <button type="submit" class="btn btn-primary btn-block" id="editTemplateBtn">
                    Update Template
                </button>
            </form>
        </div>
    </div>

    <!-- DASHBOARD PAGE SECTION -->
    <div id="dashboardPage" class="page-section">
        <div class="dashboard">
            <div class="container">
                <div class="dashboard-header">
                    <h1>My Templates</h1>
                    <p>Download and manage your purchased templates</p>
                </div>
                
                <div id="dashboardContent" class="dashboard-grid">
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                        <div class="loading"></div>
                        <p style="margin-top: 1rem; color: var(--text-secondary);">Loading your templates...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        // ============================================
        // DEPLOYTEMPLATE COMPLETE - SINGLE FILE APP
        // Configuration + Authentication + App Logic
        // ============================================

        // CONFIGURATION
        const CONFIG = {
            SUPABASE_URL: 'https://gkyzpehxdqoolomglpal.supabase.co',
            SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdreXpwZWh4ZHFvb2xvbWdscGFsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY3MjU0NzAsImV4cCI6MjA4MjMwMTQ3MH0.mdhXZZXFTWnSrdtIMTYAIR47LcCZXAz9ofxQmVCxnmc',
            GUMROAD_SELLER_ID: 'goldstar06',
            ADMIN_EMAIL: 'tylern101@yahoo.com',
            SITE_URL: window.location.origin,
            SITE_NAME: 'DeployTemplate',
            GUMROAD_PRODUCTS: {
                'test': 'tf-test',
                'saas-landing': 'tf-saas-landing',
                'portfolio': 'tf-portfolio',
                'restaurant': 'tf-restaurant'
            }
        };

        // Initialize Supabase Client
        const { createClient } = window.supabase;
        const supabaseClient = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY, {
            db: {
                schema: 'public'
            },
            global: {
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            }
        });
        
        // Global State
        let currentUser = null;
        let currentRoute = 'home';
        let currentTemplateSlug = null;

        // ============================================
        // MOBILE MENU
        // ============================================
        
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            navLinks.classList.toggle('active');
            mobileToggle.classList.toggle('active');
            
            // Prevent body scroll when menu is open
            if (navLinks.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        // Close mobile menu when clicking nav link
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    const navLinks = document.getElementById('navLinks');
                    const mobileToggle = document.querySelector('.mobile-menu-toggle');
                    navLinks.classList.remove('active');
                    mobileToggle.classList.remove('active');
                    document.body.style.overflow = '';
                });
            });
        });

        // ============================================
        // SIDEBAR TOGGLE
        // ============================================
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const sidebarToggle = document.getElementById('sidebarToggle');
            
            sidebar.classList.toggle('active');
            sidebarOverlay.classList.toggle('active');
            sidebarToggle.classList.toggle('active');
            
            // Prevent body scroll when sidebar is open
            if (sidebar.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        // Filter templates by quick filter
        function filterTemplates(filter) {
            console.log('Filtering by:', filter);
            toggleSidebar();
            scrollToSection('templates');
            
            // Add your filtering logic here
            // This would filter the template grid based on the selected filter
        }
        
        // Filter templates by category
        function filterByCategory(category) {
            console.log('Filtering category:', category);
            
            // Update active state
            document.querySelectorAll('.sidebar-menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.sidebar-menu-item').classList.add('active');
            
            toggleSidebar();
            scrollToSection('templates');
            
            // Add your category filtering logic here
            // This would filter the template grid based on the selected category
        }
        
        // Sidebar search functionality
        document.addEventListener('DOMContentLoaded', () => {
            const sidebarSearch = document.getElementById('sidebarSearch');
            if (sidebarSearch) {
                sidebarSearch.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.toLowerCase();
                    console.log('Searching for:', searchTerm);
                    // Add your search logic here
                });
            }
        });

        // ============================================
        // THEME TOGGLE
        // ============================================
        
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const icon = document.getElementById('themeIcon');
            if (icon) {
                icon.innerHTML = newTheme === 'light' 
                    ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>'
                    : '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72 1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>';
            }
        }

        // Load saved theme and set icon
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Set initial icon based on saved theme
        window.addEventListener('DOMContentLoaded', () => {
            const icon = document.getElementById('themeIcon');
            if (icon) {
                icon.innerHTML = savedTheme === 'light' 
                    ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>'
                    : '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72 1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>';
            }
        });

        // ============================================
        // NAVIGATION & ROUTING
        // ============================================
        
        function scrollToSection(sectionId) {
            // If we're not on home page, navigate to home first
            if (currentRoute !== 'home') {
                navigateTo('home');
                setTimeout(() => {
                    const element = document.getElementById(sectionId);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        // Manually set active state after scrolling
                        setTimeout(() => setActiveNavLink(sectionId), 300);
                    }
                }, 100);
            } else {
                // We're already on home, just scroll
                const element = document.getElementById(sectionId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    // Manually set active state after scrolling
                    setTimeout(() => setActiveNavLink(sectionId), 300);
                }
            }
        }
        
        function setActiveNavLink(sectionId) {
            const navLinks = document.querySelectorAll('.nav-links a[href^="#"]');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + sectionId) {
                    link.classList.add('active');
                }
            });
        }
        
        function navigateTo(page) {
            // Hide all page sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected page
            let pageElement;
            if (page === 'home') {
                pageElement = document.getElementById('homePage');
            } else if (page === 'dashboard') {
                pageElement = document.getElementById('dashboardPage');
            } else if (page === 'template-detail') {
                pageElement = document.getElementById('template-detail-page');
            }
            
            if (pageElement) {
                pageElement.classList.add('active');
                currentRoute = page;
                
                // Load dashboard data if needed
                if (page === 'dashboard') {
                    if (!currentUser) {
                        showNotification('Please sign in to view your dashboard', 'info');
                        showLogin();
                        navigateTo('home');
                        return;
                    }
                    loadDashboard();
                }
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // ============================================
        // AUTHENTICATION
        // ============================================
        
        async function checkAuth() {
            try {
                const { data: { session }, error } = await supabaseClient.auth.getSession();
                
                if (error && error.name !== 'AuthSessionMissingError') {
                    console.error('Auth check error:', error);
                }
                
                currentUser = session?.user ?? null;
                updateNavigation();
                return currentUser;
            } catch (error) {
                if (error.name !== 'AuthSessionMissingError') {
                    console.error('Auth check error:', error);
                }
                currentUser = null;
                updateNavigation();
                return null;
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const btn = document.getElementById('loginBtn');
            const errorEl = document.getElementById('loginError');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Signing in...';
            errorEl.classList.remove('active');
            
            try {
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) throw error;
                
                currentUser = data.user;
                closeModal('loginModal');
                showNotification('Welcome back!', 'success');
                updateNavigation();
                navigateTo('home');
                
            } catch (error) {
                errorEl.textContent = error.message;
                errorEl.classList.add('active');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Sign In';
            }
        }

        async function handleSignup(event) {
            event.preventDefault();
            
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const btn = document.getElementById('signupBtn');
            const errorEl = document.getElementById('signupError');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Creating account...';
            errorEl.classList.remove('active');
            
            try {
                const { data, error } = await supabaseClient.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            full_name: name
                        }
                    }
                });
                
                if (error) throw error;
                
                // Create user profile
                if (data.user) {
                    await supabaseClient
                        .from('users')
                        .insert({
                            id: data.user.id,
                            email: email,
                            full_name: name
                        })
                        .select();
                }
                
                currentUser = data.user;
                closeModal('signupModal');
                showNotification('Account created! Welcome to DeployTemplate! ', 'success');
                updateNavigation();
                navigateTo('dashboard');
                
            } catch (error) {
                errorEl.textContent = error.message;
                errorEl.classList.add('active');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Create Account';
            }
        }

        async function signOut() {
            try {
                await supabaseClient.auth.signOut();
                currentUser = null;
                updateNavigation();
                navigateTo('home');
                showNotification('Signed out successfully', 'info');
            } catch (error) {
                console.error('Sign out error:', error);
                showNotification('Error signing out', 'error');
            }
        }

        function updateNavigation() {
            const navCta = document.getElementById('navCta');
            const sidebarAccountSection = document.getElementById('sidebarAccountSection');
            
            if (!navCta) return;
            
            if (currentUser) {
                // Show sidebar account section when logged in
                if (sidebarAccountSection) {
                    sidebarAccountSection.style.display = 'block';
                }
                
                const initial = currentUser.email[0].toUpperCase();
                const isAdmin = currentUser.email === CONFIG.ADMIN_EMAIL;
                const adminButton = isAdmin ? `<a onclick="showAdminModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    Admin Panel
                </a>` : '';
                
                navCta.innerHTML = `
                    <div class="user-menu" onmouseenter="showUserDropdown()" onmouseleave="hideUserDropdown()">
                        <div class="user-avatar" onclick="navigateTo('dashboard')">
                            <img src="logo.png" alt="Profile" style="width: 28px; height: 28px; object-fit: contain;">
                        </div>
                        <div class="user-dropdown" id="userDropdown">
                            <a onclick="navigateTo('dashboard')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"/>
                                    <rect x="14" y="3" width="7" height="7"/>
                                    <rect x="14" y="14" width="7" height="7"/>
                                    <rect x="3" y="14" width="7" height="7"/>
                                </svg>
                                My Library
                            </a>
                            <a onclick="navigateTo('dashboard')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                </svg>
                                Wishlist
                            </a>
                            <a onclick="navigateTo('dashboard')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                    <line x1="1" y1="10" x2="23" y2="10"/>
                                </svg>
                                Purchases
                            </a>
                            <a onclick="navigateTo('dashboard')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Downloads
                            </a>
                            <a onclick="navigateTo('dashboard')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M12 1v6m0 6v6m5.2-15.8l-4.2 4.2m0 5.2l-4.2 4.2M23 12h-6m-6 0H1m15.8 5.2l-4.2-4.2m0-5.2l-4.2-4.2"/>
                                </svg>
                                Settings
                            </a>
                            ${adminButton}
                            <div class="user-dropdown-divider"></div>
                            <button onclick="signOut()" class="sign-out">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                    <polyline points="16 17 21 12 16 7"/>
                                    <line x1="21" y1="12" x2="9" y2="12"/>
                                </svg>
                                Sign Out
                            </button>
                        </div>
                    </div>
                `;
            } else {
                // Hide sidebar account section when logged out
                if (sidebarAccountSection) {
                    sidebarAccountSection.style.display = 'none';
                }
                
                navCta.innerHTML = `
                    <button class="btn btn-secondary" onclick="showLogin()">Sign In</button>
                    <button class="btn btn-primary" onclick="showSignup()">Get Started</button>
                `;
            }
        }

        function showUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.add('active');
            }
        }

        function hideUserDropdown() {
            setTimeout(() => {
                const dropdown = document.getElementById('userDropdown');
                if (dropdown && !dropdown.matches(':hover')) {
                    dropdown.classList.remove('active');
                }
            }, 300);
        }

        function toggleUserMenu(event) {
            event.stopPropagation();
            const dropdown = document.getElementById('userDropdown');
            if (dropdown) {
                dropdown.classList.toggle('active');
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            if (dropdown && userMenu && !userMenu.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        // ============================================
        // MODAL MANAGEMENT
        // ============================================
        
        function showLogin() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.classList.add('active');
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                document.getElementById('loginError').classList.remove('active');
            }
        }

        function showSignup() {
            const modal = document.getElementById('signupModal');
            if (modal) {
                modal.classList.add('active');
                // Clear form
                document.getElementById('signupName').value = '';
                document.getElementById('signupEmail').value = '';
                document.getElementById('signupPassword').value = '';
                document.getElementById('signupError').classList.remove('active');
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // Close modal on overlay click
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });
        });

        // ============================================
        // DASHBOARD
        // ============================================
        
        async function loadDashboard() {
            if (!currentUser) {
                navigateTo('home');
                showLogin();
                return;
            }
            
            const container = document.getElementById('dashboardContent');
            if (!container) return;
            
            container.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 3rem;"><div class="loading"></div><p style="margin-top: 1rem; color: var(--text-secondary);">Loading your templates...</p></div>';
            
            try {
                const { data: purchases, error } = await supabaseClient
                    .from('purchases')
                    .select(`
                        *,
                        templates (
                            id,
                            name,
                            slug,
                            thumbnail_url,
                            current_version,
                            category
                        )
                    `)
                    .eq('user_id', currentUser.id)
                    .order('purchased_at', { ascending: false });
                
                if (error) throw error;
                
                if (!purchases || purchases.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon"></div>
                            <h3>No templates yet</h3>
                            <p>Purchase your first template to get started building amazing websites!</p>
                            <button class="btn btn-primary btn-lg" onclick="navigateTo('home'); setTimeout(() => document.getElementById('templates').scrollIntoView({behavior:'smooth'}), 100);">Browse Templates</button>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = purchases.map(purchase => {
                    const template = purchase.templates;
                    const gradients = ['gradient-1', 'gradient-2', 'gradient-3'];
                    const randomGradient = gradients[Math.floor(Math.random() * gradients.length)];
                    
                    return `
                        <div class="dashboard-card">
                            <div class="card-image" style="background: var(--${randomGradient});">
                                <div class="card-badge">v${template.current_version}</div>
                            </div>
                            <div class="card-content">
                                <h3>${template.name}</h3>
                                <p>${template.category || 'Template'}</p>
                                <div class="card-meta">
                                    <div class="card-meta-item">
                                        <span></span>
                                        ${new Date(purchase.purchased_at).toLocaleDateString()}
                                    </div>
                                    <div class="card-meta-item">
                                        <span></span>
                                        Lifetime Access
                                    </div>
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-primary btn-small" onclick="downloadTemplate('${template.slug}', '${template.current_version}')">
                                         Download
                                    </button>
                                    <button class="btn btn-secondary btn-small" onclick="showNotification('Updates coming soon!', 'info')">
                                         Updates
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Dashboard load error:', error);
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon"></div>
                        <h3>Error loading templates</h3>
                        <p>${error.message}</p>
                        <button class="btn btn-primary" onclick="loadDashboard()">Try Again</button>
                    </div>
                `;
            }
        }

        async function downloadTemplate(slug, version) {
            showNotification('Preparing your download...', 'info');
            
            try {
                // Get template info
                const { data: template, error: templateError } = await supabaseClient
                    .from('templates')
                    .select('*')
                    .eq('slug', slug)
                    .single();
                
                if (templateError) throw templateError;
                if (!template) throw new Error('Template not found');
                
                // Create signed URL for download
                const filePath = `${slug}/${slug}-v${version}.zip`;
                const { data: urlData, error: urlError } = await supabaseClient.storage
                    .from('templates')
                    .createSignedUrl(filePath, 3600); // 1 hour expiry
                
                if (urlError) {
                    // File doesn't exist yet - show friendly message
                    showNotification('Template file is being prepared by admin. Check back soon!', 'info');
                    return;
                }
                
                // Trigger download
                const link = document.createElement('a');
                link.href = urlData.signedUrl;
                link.download = `${slug}-v${version}.zip`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('Download started! ', 'success');
                
                // Log the download
                await supabaseClient
                    .from('download_logs')
                    .insert({
                        user_id: currentUser.id,
                        template_id: template.id,
                        version: version
                    });
                
            } catch (error) {
                console.error('Download error:', error);
                showNotification('Download failed: ' + error.message, 'error');
            }
        }

        // ============================================
        // PURCHASE FLOW
        // ============================================
        
        function buyTemplate(templateSlug, templateName, price) {
            if (!currentUser) {
                showNotification('Please sign up to purchase templates!', 'info');
                setTimeout(() => showSignup(), 500);
                return;
            }
            
            // Get Gumroad product permalink
            const gumroadPermalink = CONFIG.GUMROAD_PRODUCTS[templateSlug];
            if (!gumroadPermalink) {
                console.error('No Gumroad product found for:', templateSlug);
                showNotification('Product configuration error. Please contact support.', 'error');
                return;
            }
            
            // Open Gumroad with user email pre-filled
            const gumroadUrl = `https://gumroad.com/l/${gumroadPermalink}?email=${encodeURIComponent(currentUser.email)}&wanted=true`;
            
            // Try popup first
            const popup = window.open(gumroadUrl, 'gumroad', 'width=600,height=800,scrollbars=yes');
            
            if (popup) {
                showNotification('Complete your purchase in the popup window. Your template will appear in your dashboard once payment is confirmed!', 'info');
            } else {
                // Popup blocked, redirect instead
                window.location.href = gumroadUrl;
            }
        }

        // ============================================
        // NOTIFICATIONS
        // ============================================
        
        function showNotification(message, type = 'success') {
            // Remove any existing notifications
            document.querySelectorAll('.notification').forEach(n => n.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'success' ? '' : type === 'error' ? '' : '';
            notification.innerHTML = `<span style="font-size: 1.25rem;">${icon}</span><span>${message}</span>`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }

        // ============================================
        // BROWSE TEMPLATES
        // ============================================
        
        let currentPage = 1;
        let templatesPerPage = 9;
        let allTemplates = [];
        let filteredTemplates = [];

        async function loadBrowseTemplates() {
            console.log('Loading browse templates...');
            const grid = document.getElementById('browseTemplatesGrid');
            
            if (!grid) return;
            
            try {
                // Fetch all templates from Supabase
                const { data: templates, error } = await supabaseClient
                    .from('templates')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                // Use templates from DB, or fallback to mock data if empty
                allTemplates = (templates && templates.length > 0) ? templates : getMockTemplates();
                filteredTemplates = [...allTemplates];
                
                renderTemplates();
                setupBrowseListeners();
                
            } catch (error) {
                // Use mock data on error
                allTemplates = getMockTemplates();
                filteredTemplates = [...allTemplates];
                renderTemplates();
                setupBrowseListeners();
            }
        }

        function getMockTemplates() {
            return [
                {
                    slug: 'flowmetrics-saas',
                    name: 'FlowMetrics - Analytics SaaS',
                    description: 'Modern landing page perfect for SaaS products, with pricing tables, feature sections, and conversion-optimized design.',
                    category: 'saas',
                    price: 0,
                    original_price: 69,
                    is_popular: true,
                    is_new: false,
                    features: ['Responsive Design', 'Dark Mode', 'Animations', 'Pricing Tables'],
                    downloads: 1247,
                    demo_url: 'https://example.com/demo',
                    tech_stack: ['HTML5', 'CSS3', 'JavaScript', 'GSAP'],
                    created_at: '2024-01-15T00:00:00Z',
                    updated_at: '2024-12-20T00:00:00Z'
                },
                {
                    slug: 'alex-portfolio',
                    name: 'Alex Chen - Creative Portfolio',
                    description: 'Stunning dark-themed portfolio with custom cursor effects, scroll animations, and project showcases for creatives.',
                    category: 'portfolio',
                    price: 39,
                    original_price: 69,
                    is_popular: false,
                    is_new: true,
                    features: ['Dark Theme', 'Custom Cursor', 'Scroll Effects', 'Gallery'],
                    downloads: 543,
                    demo_url: 'https://example.com/demo',
                    tech_stack: ['HTML5', 'CSS3', 'JavaScript'],
                    created_at: '2024-12-01T00:00:00Z',
                    updated_at: '2024-12-22T00:00:00Z'
                },
                {
                    slug: 'bella-restaurant',
                    name: 'Bella Vista - Restaurant',
                    description: 'Elegant restaurant template with menu displays, reservation forms, and gallery sections. Perfect for local businesses.',
                    category: 'business',
                    price: 39,
                    original_price: 69,
                    is_popular: false,
                    is_new: false,
                    features: ['Menu System', 'Reservations', 'Gallery', 'Contact Forms'],
                    downloads: 892,
                    demo_url: null,
                    tech_stack: ['HTML5', 'CSS3', 'JavaScript', 'PHP'],
                    created_at: '2024-02-10T00:00:00Z',
                    updated_at: '2024-11-15T00:00:00Z'
                },
                {
                    slug: 'shopify-modern',
                    name: 'Modern E-commerce Store',
                    description: 'Complete e-commerce solution with product grids, shopping cart, checkout flow, and admin dashboard.',
                    category: 'ecommerce',
                    price: 79,
                    original_price: 129,
                    is_popular: true,
                    is_new: false,
                    features: ['Shopping Cart', 'Payment Integration', 'Product Filters', 'Admin Panel'],
                    downloads: 2103,
                    demo_url: 'https://example.com/demo',
                    tech_stack: ['React', 'Node.js', 'Stripe', 'MongoDB'],
                    created_at: '2024-03-20T00:00:00Z',
                    updated_at: '2024-12-18T00:00:00Z'
                },
                {
                    slug: 'agency-pro',
                    name: 'Agency Pro - Digital Agency',
                    description: 'Professional agency template with case studies, team section, service pages, and client testimonials.',
                    category: 'business',
                    price: 49,
                    original_price: 89,
                    is_popular: false,
                    is_new: true,
                    features: ['Portfolio Grid', 'Team Showcase', 'Case Studies', 'Contact Forms'],
                    downloads: 678,
                    demo_url: 'https://example.com/demo',
                    tech_stack: ['HTML5', 'CSS3', 'JavaScript', 'Tailwind'],
                    created_at: '2024-11-28T00:00:00Z',
                    updated_at: '2024-12-24T00:00:00Z'
                },
                {
                    slug: 'startup-launch',
                    name: 'Startup Launch - Landing Page',
                    description: 'High-converting landing page designed for product launches with email capture, countdown timer, and social proof.',
                    category: 'landing',
                    price: 29,
                    original_price: 59,
                    is_popular: true,
                    is_new: false,
                    features: ['Email Capture', 'Countdown Timer', 'Social Proof', 'Video Background'],
                    downloads: 1556,
                    demo_url: 'https://example.com/demo',
                    tech_stack: ['HTML5', 'CSS3', 'JavaScript', 'Mailchimp'],
                    created_at: '2024-04-12T00:00:00Z',
                    updated_at: '2024-12-10T00:00:00Z'
                }
            ];
        }

        function renderTemplates() {
            const grid = document.getElementById('browseTemplatesGrid');
            const pagination = document.getElementById('browsePagination');
            
            if (filteredTemplates.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon"></div>
                        <h3>No templates found</h3>
                        <p>Try adjusting your search or filters</p>
                    </div>
                `;
                pagination.style.display = 'none';
                return;
            }
            
            // Calculate pagination
            const totalPages = Math.ceil(filteredTemplates.length / templatesPerPage);
            const startIndex = (currentPage - 1) * templatesPerPage;
            const endIndex = startIndex + templatesPerPage;
            const paginatedTemplates = filteredTemplates.slice(startIndex, endIndex);
            
            // Render template cards
            const gradients = ['gradient-1', 'gradient-2', 'gradient-3'];
            grid.innerHTML = paginatedTemplates.map((template, index) => {
                const randomGradient = gradients[index % gradients.length];
                const price = template.price || 0;
                const originalPrice = template.original_price || price;
                
                return `
                    <div class="template-card" data-category="${template.category || 'all'}">
                        <div class="template-image">
                            <div class="preview-gradient ${randomGradient}"></div>
                            <div class="template-overlay">
                                <button class="btn btn-white" onclick="event.preventDefault(); viewTemplateDetails('${template.slug}'); return false;">View Details</button>
                                ${template.demo_url ? `<a href="${template.demo_url}" target="_blank" class="btn btn-outline-white">Live Preview</a>` : ''}
                            </div>
                            ${template.is_popular ? '<div class="template-badge">Most Popular</div>' : ''}
                            ${template.is_new ? '<div class="template-badge badge-new">New</div>' : ''}
                        </div>
                        <div class="template-info">
                            <div class="template-category">${template.category || 'Template'}</div>
                            <h3 class="template-title">${template.name}</h3>
                            <p class="template-description">${template.description || 'Professional template ready for your business'}</p>
                            <div class="template-tags">
                                ${template.features ? template.features.slice(0, 3).map(f => `<span class="tag">${f}</span>`).join('') : ''}
                            </div>
                            <div class="template-footer">
                                <div class="template-price">
                                    ${originalPrice > price ? `<span class="price-original">$${originalPrice}</span>` : ''}
                                    <span class="price-current">${price === 0 ? 'FREE' : '$' + price}</span>
                                </div>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="btn btn-small btn-outline" 
                                        onclick="addToCart('${template.slug}', '${template.name}', ${price}, '${template.preview_image || ''}'); event.stopPropagation();"
                                        title="Add to Cart"
                                        style="flex: 1;">
                                        Add to Cart
                                    </button>
                                    <button class="btn btn-small ${price === 0 ? 'btn-primary' : 'btn-secondary'}" 
                                        onclick="buyTemplate('${template.slug}', '${template.name}', ${price})"
                                        style="flex: 1;">
                                        ${price === 0 ? 'Get Free ' : 'Buy Now '}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Render pagination
            if (totalPages > 1) {
                renderPagination(totalPages);
                pagination.style.display = 'flex';
            } else {
                pagination.style.display = 'none';
            }
        }

        function renderPagination(totalPages) {
            const pagesContainer = document.getElementById('paginationPages');
            const prevBtn = document.getElementById('prevPage');
            const nextBtn = document.getElementById('nextPage');
            
            // Update prev/next buttons
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
            
            // Render page numbers
            let pagesHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    pagesHTML += `
                        <div class="pagination-page ${i === currentPage ? 'active' : ''}" 
                            onclick="goToPage(${i})">${i}</div>
                    `;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    pagesHTML += `<div class="pagination-page">...</div>`;
                }
            }
            pagesContainer.innerHTML = pagesHTML;
        }

        function goToPage(page) {
            currentPage = page;
            renderTemplates();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function setupBrowseListeners() {
            // Search
            const searchInput = document.getElementById('templateSearch');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    filterTemplates();
                });
            }
            
            // Category filter
            const categoryFilter = document.getElementById('categoryFilter');
            if (categoryFilter) {
                categoryFilter.addEventListener('change', filterTemplates);
            }
            
            // Sort filter
            const sortFilter = document.getElementById('sortFilter');
            if (sortFilter) {
                sortFilter.addEventListener('change', filterTemplates);
            }
            
            // Pagination buttons
            document.getElementById('prevPage')?.addEventListener('click', () => {
                if (currentPage > 1) goToPage(currentPage - 1);
            });
            
            document.getElementById('nextPage')?.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredTemplates.length / templatesPerPage);
                if (currentPage < totalPages) goToPage(currentPage + 1);
            });
        }

        function filterTemplates() {
            const searchTerm = document.getElementById('templateSearch')?.value.toLowerCase() || '';
            const category = document.getElementById('categoryFilter')?.value || 'all';
            const sortBy = document.getElementById('sortFilter')?.value || 'newest';
            
            // Filter
            filteredTemplates = allTemplates.filter(template => {
                const matchesSearch = !searchTerm || 
                    template.name.toLowerCase().includes(searchTerm) ||
                    (template.description && template.description.toLowerCase().includes(searchTerm));
                
                const matchesCategory = category === 'all' || template.category === category;
                
                return matchesSearch && matchesCategory;
            });
            
            // Sort
            filteredTemplates.sort((a, b) => {
                switch(sortBy) {
                    case 'newest':
                        return new Date(b.created_at) - new Date(a.created_at);
                    case 'popular':
                        return (b.downloads || 0) - (a.downloads || 0);
                    case 'price-low':
                        return (a.price || 0) - (b.price || 0);
                    case 'price-high':
                        return (b.price || 0) - (a.price || 0);
                    default:
                        return 0;
                }
            });
            
            currentPage = 1;
            renderTemplates();
        }

        function viewTemplateDetails(slug) {
            currentTemplateSlug = slug;
            window.currentTemplateSlug = slug; // Also store on window for buyTemplateFromDetail
            navigateTo('template-detail');
            loadTemplateDetail(slug);
        }

        async function loadTemplateDetail(slug) {
            try {
                // Fetch template details with proper headers
                const { data: template, error } = await supabaseClient
                    .from('templates')
                    .select('*')
                    .eq('slug', slug)
                    .single();
                
                if (error) throw error;
                if (!template) throw new Error('Template not found');
                
                // Populate header
                if (template.is_popular) {
                    document.getElementById('detailBadge').textContent = 'Most Popular';
                    document.getElementById('detailBadge').style.display = 'inline-block';
                } else if (template.is_new) {
                    document.getElementById('detailBadge').textContent = 'New';
                    document.getElementById('detailBadge').style.display = 'inline-block';
                    document.getElementById('detailBadge').style.background = 'var(--secondary)';
                } else {
                    document.getElementById('detailBadge').style.display = 'none';
                }
                
                document.getElementById('detailCategory').textContent = template.category || 'Template';
                document.getElementById('detailTitle').textContent = template.name;
                document.getElementById('detailDescription').textContent = template.description || 'Professional template ready for your business';
                
                // Meta info
                document.getElementById('detailDownloads').textContent = `${template.downloads || 0} downloads`;
                const updatedDate = new Date(template.updated_at || template.created_at);
                document.getElementById('detailUpdated').textContent = `Updated ${updatedDate.toLocaleDateString()}`;
                
                // Price
                const price = template.price || 0;
                const originalPrice = template.original_price || price;
                
                if (originalPrice > price) {
                    document.getElementById('detailPriceOriginal').textContent = `$${originalPrice}`;
                    document.getElementById('detailPriceOriginal').style.display = 'inline';
                } else {
                    document.getElementById('detailPriceOriginal').style.display = 'none';
                }
                
                document.getElementById('detailPriceCurrent').textContent = price === 0 ? 'FREE' : `$${price}`;
                
                // Buy button
                const buyBtn = document.getElementById('detailBuyBtn');
                buyBtn.textContent = price === 0 ? 'Get Free Template ' : 'Buy Now ';
                buyBtn.onclick = () => buyTemplate(template.slug, template.name, price);
                
                // Preview button
                const previewBtn = document.getElementById('detailPreviewBtn');
                if (template.demo_url) {
                    previewBtn.onclick = () => window.open(template.demo_url, '_blank');
                    previewBtn.style.display = 'block';
                } else {
                    previewBtn.style.display = 'none';
                }
                
                // Preview image
                const gradients = ['gradient-1', 'gradient-2', 'gradient-3'];
                const randomGradient = gradients[Math.floor(Math.random() * gradients.length)];
                document.getElementById('detailPreview').innerHTML = `
                    <div class="detail-preview-image" style="background: var(--${randomGradient});"></div>
                `;
                
                // Features
                if (template.features && template.features.length > 0) {
                    const featureIcons = ['', '', '', '', '', '', '', ''];
                    document.getElementById('detailFeatures').innerHTML = template.features.map((feature, index) => `
                        <div class="feature-item">
                            <div class="feature-icon">${featureIcons[index % featureIcons.length]}</div>
                            <div class="feature-content">
                                <h4>${feature}</h4>
                                <p>Fully customizable and optimized for performance</p>
                            </div>
                        </div>
                    `).join('');
                } else {
                    document.getElementById('detailFeatures').innerHTML = `
                        <div class="feature-item">
                            <div class="feature-icon"></div>
                            <div class="feature-content">
                                <h4>Modern Design</h4>
                                <p>Clean, professional design that stands out</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"></div>
                            <div class="feature-content">
                                <h4>Fully Responsive</h4>
                                <p>Perfect on all devices and screen sizes</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"></div>
                            <div class="feature-content">
                                <h4>Fast Performance</h4>
                                <p>Optimized for speed and user experience</p>
                            </div>
                        </div>
                    `;
                }
                
                // Screenshots (placeholder gradients for now)
                document.getElementById('detailScreenshots').innerHTML = gradients.map(gradient => `
                    <div class="screenshot-item">
                        <div style="width: 100%; height: 300px; background: var(--${gradient});"></div>
                    </div>
                `).join('');
                
                // Tech stack
                const techStack = template.tech_stack || ['HTML5', 'CSS3', 'JavaScript', 'Responsive Design'];
                document.getElementById('detailTechStack').innerHTML = techStack.map(tech => `
                    <div class="tech-item">${tech}</div>
                `).join('');
                
            } catch (error) {
                console.error('Error loading template details:', error);
                showNotification('Error loading template details: ' + error.message, 'error');
                navigateTo('home');
                setTimeout(() => document.getElementById('templates').scrollIntoView({behavior:'smooth'}), 100);
            }
        }

        function buyTemplateFromDetail() {
            const slug = window.currentTemplateSlug;
            const name = document.getElementById('detailTitle').textContent;
            const priceText = document.getElementById('detailPriceCurrent').textContent;
            const price = priceText === 'FREE' ? 0 : parseFloat(priceText.replace('$', ''));
            buyTemplate(slug, name, price);
        }

        // ============================================
        // SEARCH SUGGESTIONS
        // ============================================
        
        let searchDebounceTimer = null;
        
        function setupSearchSuggestions() {
            // Navbar search
            const navSearch = document.getElementById('navSearch');
            const navSuggestions = document.getElementById('navSearchSuggestions');
            
            if (navSearch) {
                navSearch.addEventListener('input', (e) => {
                    clearTimeout(searchDebounceTimer);
                    searchDebounceTimer = setTimeout(() => {
                        showSearchSuggestions(e.target.value, navSuggestions, navSearch);
                    }, 300);
                });
                
                navSearch.addEventListener('focus', (e) => {
                    if (e.target.value) {
                        showSearchSuggestions(e.target.value, navSuggestions, navSearch);
                    }
                });
                
                // Close on click outside
                document.addEventListener('click', (e) => {
                    if (!navSearch.contains(e.target) && !navSuggestions.contains(e.target)) {
                        navSuggestions.classList.remove('active');
                    }
                });
            }
            
            // Browse page search
            const browseSearch = document.getElementById('templateSearch');
            const browseSuggestions = document.getElementById('browseSearchSuggestions');
            
            if (browseSearch) {
                browseSearch.addEventListener('input', (e) => {
                    clearTimeout(searchDebounceTimer);
                    searchDebounceTimer = setTimeout(() => {
                        showSearchSuggestions(e.target.value, browseSuggestions, browseSearch);
                    }, 300);
                });
                
                browseSearch.addEventListener('focus', (e) => {
                    if (e.target.value) {
                        showSearchSuggestions(e.target.value, browseSuggestions, browseSearch);
                    }
                });
                
                document.addEventListener('click', (e) => {
                    if (!browseSearch.contains(e.target) && !browseSuggestions.contains(e.target)) {
                        browseSuggestions.classList.remove('active');
                    }
                });
            }
        }
        
        function showSearchSuggestions(query, suggestionsContainer, inputElement) {
            if (!query || query.length < 2) {
                suggestionsContainer.classList.remove('active');
                return;
            }
            
            const searchTerm = query.toLowerCase();
            
            // Search through all templates
            const matches = allTemplates.filter(template => {
                return template.name.toLowerCase().includes(searchTerm) ||
                       (template.description && template.description.toLowerCase().includes(searchTerm)) ||
                       (template.category && template.category.toLowerCase().includes(searchTerm));
            }).slice(0, 5); // Show max 5 suggestions
            
            if (matches.length === 0) {
                suggestionsContainer.innerHTML = `
                    <div class="suggestion-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        <p>No templates found for "${query}"</p>
                    </div>
                `;
                suggestionsContainer.classList.add('active');
                return;
            }
            
            const gradients = ['gradient-1', 'gradient-2', 'gradient-3'];
            suggestionsContainer.innerHTML = matches.map((template, index) => {
                const gradient = gradients[index % gradients.length];
                const price = template.price || 0;
                
                return `
                    <div class="suggestion-item" onclick="selectTemplate('${template.slug}', '${inputElement.id}')">
                        <div class="suggestion-icon" style="background: var(--${gradient});"></div>
                        <div class="suggestion-content">
                            <div class="suggestion-name">${template.name}</div>
                            <div class="suggestion-category">${template.category || 'Template'}</div>
                        </div>
                        <div class="suggestion-price">${price === 0 ? 'FREE' : '$' + price}</div>
                    </div>
                `;
            }).join('');
            
            suggestionsContainer.classList.add('active');
        }
        
        function selectTemplate(slug, inputId) {
            // Close suggestions
            document.querySelectorAll('.search-suggestions').forEach(s => s.classList.remove('active'));
            
            // Scroll to templates section and filter to this template
            navigateTo('home');
            
            setTimeout(() => {
                const searchInput = document.getElementById('templateSearch');
                const template = allTemplates.find(t => t.slug === slug);
                if (searchInput && template) {
                    searchInput.value = template.name;
                    filterTemplates();
                }
                // Scroll to templates section
                document.getElementById('templates').scrollIntoView({behavior:'smooth'});
            }, 300);
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('%c DeployTemplate', 'font-size: 20px; font-weight: bold; color: #14B8A6;');
            console.log('%cPremium website templates marketplace', 'font-size: 12px; color: #71717a;');
            
            // Set theme icon
            const themeIcon = document.getElementById('themeIcon');
            if (themeIcon) {
                themeIcon.textContent = savedTheme === 'light' ? '' : '';
            }
            
            // Check auth state
            await checkAuth();
            
            // Load templates for search suggestions
            try {
                const { data: templates, error } = await supabaseClient
                    .from('templates')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (!error && templates && templates.length > 0) {
                    allTemplates = templates;
                } else {
                    // Use mock data if DB is empty or error
                    allTemplates = getMockTemplates();
                }
            } catch (error) {
                console.error('Error loading templates:', error);
                allTemplates = getMockTemplates();
            }
            
            // Setup search suggestions
            setupSearchSuggestions();
            
            // Load templates into the integrated Templates section
            loadBrowseTemplates();
            
            // Listen for auth state changes
            supabaseClient.auth.onAuthStateChange(async (event, session) => {
                currentUser = session?.user ?? null;
                updateNavigation();
                
                if (event === 'SIGNED_IN') {
                } else if (event === 'SIGNED_OUT') {
                    navigateTo('home');
                }
            });
            
            // Scroll spy for nav links
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-links a[href^="#"]');
            
            function updateActiveLink() {
                const scrollY = window.pageYOffset;
                const windowHeight = window.innerHeight;
                
                // Clear all active states first
                navLinks.forEach(link => link.classList.remove('active'));
                
                // Find the current section
                let currentSection = null;
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const sectionId = section.getAttribute('id');
                    
                    // Calculate when to activate this section
                    // For templates during scroll spy, use higher threshold to avoid activating in hero
                    // But if user is actually IN templates section (past the start), activate it
                    let activationPoint;
                    if (sectionId === 'templates') {
                        // If we're past the section start, use a small offset
                        // Otherwise use viewport-based threshold
                        if (scrollY >= sectionTop) {
                            activationPoint = sectionTop - 50; // Small offset when already in section
                        } else {
                            activationPoint = sectionTop + (windowHeight * 0.3); // Larger offset when approaching
                        }
                    } else {
                        activationPoint = sectionTop - 150; // Standard offset for other sections
                    }
                    
                    // Check if we're in this section
                    if (scrollY >= activationPoint && scrollY < sectionTop + sectionHeight) {
                        currentSection = sectionId;
                    }
                });
                
                // Activate the matching nav link
                if (currentSection) {
                    navLinks.forEach(link => {
                        if (link.getAttribute('href') === '#' + currentSection) {
                            link.classList.add('active');
                        }
                    });
                }
            }
            
            window.addEventListener('scroll', updateActiveLink);
            updateActiveLink(); // Initial check
            
            // Initialize home page as active
            navigateTo('home');
            
            // Typewriter effect for logo
            setTimeout(() => {
                const logoSpans = document.querySelectorAll('.logo-text-template-inner span');
                const cursor = document.querySelector('.logo-text-template-cursor');
                
                
                if (logoSpans.length === 0) {
                    return;
                }
                
                let currentIndex = 0;
                let isTyping = true;
                
                // Set all to invisible first
                logoSpans.forEach(span => {
                    span.style.opacity = '0';
                    span.style.visibility = 'visible';
                });
                
                function updateCursorPosition() {
                    if (!cursor) return;
                    // Position cursor after the last visible letter
                    if (currentIndex > 0 && currentIndex <= logoSpans.length) {
                        const lastVisibleSpan = logoSpans[currentIndex - 1];
                        const rect = lastVisibleSpan.getBoundingClientRect();
                        const parentRect = lastVisibleSpan.parentElement.getBoundingClientRect();
                        cursor.style.left = (rect.right - parentRect.left + 4) + 'px';
                    } else {
                        cursor.style.left = '0px';
                    }
                }
                
                function typewriterEffect() {
                    if (isTyping) {
                        // Typing phase
                        if (currentIndex < logoSpans.length) {
                            logoSpans[currentIndex].style.opacity = '1';
                            currentIndex++;
                            updateCursorPosition();
                            setTimeout(typewriterEffect, 150); // 150ms between letters
                        } else {
                            // Pause when fully typed
                            setTimeout(() => {
                                isTyping = false;
                                currentIndex = logoSpans.length - 1;
                                typewriterEffect();
                            }, 2000); // Pause for 2 seconds
                        }
                    } else {
                        // Deleting phase
                        if (currentIndex >= 0) {
                            logoSpans[currentIndex].style.opacity = '0';
                            currentIndex--;
                            updateCursorPosition();
                            setTimeout(typewriterEffect, 50); // 50ms between deletions (faster)
                        } else {
                            // Pause when fully deleted, then start over
                            setTimeout(() => {
                                isTyping = true;
                                currentIndex = 0;
                                typewriterEffect();
                            }, 2000); // 2 second pause before restarting (matching typed pause)
                        }
                    }
                }
                
                // Start the typewriter effect
                typewriterEffect();
            }, 100);
        });

        // ============================================
        // CART SYSTEM
        // ============================================
        
        let cart = [];

        function initCart() {
            try {
                const savedCart = localStorage.getItem('cart');
                if (savedCart) {
                    const parsed = JSON.parse(savedCart);
                    // Validate cart is array and items have required properties
                    if (Array.isArray(parsed)) {
                        cart = parsed.filter(item => item && item.slug && typeof item.price !== 'undefined');
                        // If filtered cart is different, save the cleaned version
                        if (cart.length !== parsed.length) {
                            localStorage.setItem('cart', JSON.stringify(cart));
                        }
                    } else {
                        cart = [];
                        localStorage.setItem('cart', JSON.stringify(cart));
                    }
                    updateCartUI();
                }
            } catch (error) {
                console.error('Error loading cart:', error);
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
            }
        }

        function addToCart(slug, name, price, previewImage) {
            const existingItem = cart.find(item => item.slug === slug);
            
            if (existingItem) {
                showNotification('Item already in cart', 'error');
                return;
            }

            cart.push({
                slug,
                name,
                price,
                previewImage
            });

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            showNotification('Added to cart!', 'success');
        }

        function removeFromCart(slug) {
            console.log('Removing item with slug:', slug);
            console.log('Cart before:', cart);
            cart = cart.filter(item => item.slug !== slug);
            console.log('Cart after:', cart);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            showNotification('Removed from cart', 'success');
        }

        function clearCart() {
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            showNotification('Cart cleared', 'success');
        }

        // Expose clearCart to console for debugging
        window.clearCart = clearCart;

        function updateCartUI() {
            const count = cart.length;
            const total = cart.reduce((sum, item) => sum + item.price, 0);

            // Update badge
            const badge = document.getElementById('cartBadge');
            if (count > 0) {
                badge.textContent = count;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }

            // Update dropdown
            updateCartDropdown(count, total);
            
            // Update modal
            updateCartModal(count, total);
        }

        function updateCartDropdown(count, total) {
            const itemsContainer = document.getElementById('cartDropdownItems');
            const footer = document.getElementById('cartDropdownFooter');
            const totalEl = document.getElementById('cartDropdownTotal');

            if (count === 0) {
                itemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon"></div>
                        <div class="cart-empty-text">Your cart is empty</div>
                        <div class="cart-empty-subtext">Any templates you add to your cart will be displayed here.</div>
                    </div>
                `;
                footer.style.display = 'none';
            } else {
                itemsContainer.innerHTML = cart.map((item, index) => {
                    return `
                        <div class="cart-item">
                            <div class="cart-item-image" style="background: var(--gradient-1);"></div>
                            <div class="cart-item-details">
                                <div class="cart-item-name">${item.name || 'Template'}</div>
                                <div class="cart-item-price">$${(item.price || 0).toFixed(2)}</div>
                            </div>
                            <button class="cart-item-remove" data-index="${index}" title="Remove"></button>
                        </div>
                    `;
                }).join('');
                
                // Add event listeners to remove buttons
                itemsContainer.querySelectorAll('.cart-item-remove').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const index = parseInt(btn.dataset.index);
                        removeFromCartByIndex(index);
                    });
                });
                
                totalEl.textContent = `$${total.toFixed(2)}`;
                footer.style.display = 'block';
            }
        }

        function updateCartModal(count, total) {
            const body = document.getElementById('cartModalBody');
            const footer = document.getElementById('cartModalFooter');
            const totalEl = document.getElementById('cartModalTotal');

            if (count === 0) {
                body.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon"></div>
                        <div class="cart-empty-text">Your cart is empty</div>
                        <div class="cart-empty-subtext">Any templates you add to your cart will be displayed here.</div>
                    </div>
                `;
                footer.style.display = 'none';
            } else {
                body.innerHTML = cart.map((item, index) => {
                    return `
                        <div class="cart-item" style="margin-bottom: 1rem;">
                            <div class="cart-item-image" style="background: var(--gradient-1);"></div>
                            <div class="cart-item-details">
                                <div class="cart-item-name">${item.name || 'Template'}</div>
                                <div class="cart-item-price">$${(item.price || 0).toFixed(2)}</div>
                            </div>
                            <button class="cart-item-remove" data-index="${index}" title="Remove"></button>
                        </div>
                    `;
                }).join('');
                
                // Add event listeners to remove buttons
                body.querySelectorAll('.cart-item-remove').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const index = parseInt(btn.dataset.index);
                        removeFromCartByIndex(index);
                    });
                });
                
                totalEl.textContent = `$${total.toFixed(2)}`;
                footer.style.display = 'block';
            }
        }

        function removeFromCartByIndex(index) {
            console.log('Removing item at index:', index);
            console.log('Cart before:', cart);
            cart.splice(index, 1);
            console.log('Cart after:', cart);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            showNotification('Removed from cart', 'success');
        }

        function showCartDropdown() {
            document.getElementById('cartDropdown').classList.add('active');
        }

        function hideCartDropdown() {
            setTimeout(() => {
                const dropdown = document.getElementById('cartDropdown');
                if (dropdown && !dropdown.matches(':hover')) {
                    dropdown.classList.remove('active');
                }
            }, 300);
        }

        function toggleCartModal() {
            const modal = document.getElementById('cartModal');
            const overlay = document.getElementById('cartOverlay');
            
            modal.classList.toggle('active');
            overlay.classList.toggle('active');
            
            if (modal.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                showNotification('Your cart is empty', 'error');
                return;
            }
            
            // TODO: Implement checkout process
            showNotification('Checkout coming soon!', 'error');
        }

        // Initialize cart on page load
        initCart();

        // ============================================
        // ADMIN FUNCTIONS
        // ============================================
        
        function showAdminModal() {
            document.getElementById('adminModal').classList.add('active');
            showAdminTab('add');
            loadAdminTemplates();
            loadAdminHeroImages();
            
            // Auto-generate slug from name
            document.getElementById('adminTemplateName').addEventListener('input', (e) => {
                const slug = e.target.value.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
                document.getElementById('adminTemplateSlug').value = slug;
            });
        }

        function showAdminTab(tab) {
            // Hide all tabs
            document.querySelectorAll('.admin-tab-content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.admin-tab').forEach(el => {
                el.style.borderBottomColor = 'transparent';
                el.style.color = 'var(--text-secondary)';
            });
            
            // Show selected tab
            document.getElementById(`adminTab${tab.charAt(0).toUpperCase() + tab.slice(1)}Content`).style.display = 'block';
            const tabBtn = document.getElementById(`adminTab${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
            tabBtn.style.borderBottomColor = 'var(--primary)';
            tabBtn.style.color = 'var(--primary)';
        }

        async function loadAdminTemplates() {
            const list = document.getElementById('adminTemplatesList');
            
            try {
                const { data: templates, error } = await supabaseClient
                    .from('templates')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) throw error;

                list.innerHTML = templates.map(t => `
                    <div style="background: var(--card-bg); padding: 1rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="color: var(--text-primary); margin-bottom: 0.25rem;">${t.name}</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">${t.category}  $${t.price}</p>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button onclick="editAdminTemplate('${t.id}')" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;">Edit</button>
                            <button onclick="deleteAdminTemplate('${t.id}', '${t.name}')" class="btn" style="padding: 0.5rem 1rem; font-size: 0.9rem; background: #dc2626;">Delete</button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                list.innerHTML = '<p style="color: var(--text-muted);">Error loading templates</p>';
            }
        }

        async function editAdminTemplate(id) {
            try {
                const { data: template, error } = await supabaseClient
                    .from('templates')
                    .select('*')
                    .eq('id', id)
                    .single();

                if (error) throw error;

                document.getElementById('editTemplateId').value = template.id;
                document.getElementById('editTemplateName').value = template.name;
                document.getElementById('editTemplateCategory').value = template.category;
                document.getElementById('editTemplateDescription').value = template.description;
                document.getElementById('editTemplatePrice').value = template.price;
                document.getElementById('editTemplateIsPopular').checked = template.is_popular;

                document.getElementById('editTemplateModal').classList.add('active');
            } catch (error) {
                showNotification('Error loading template: ' + error.message, 'error');
            }
        }

        async function handleEditTemplate(event) {
            event.preventDefault();
            
            const btn = document.getElementById('editTemplateBtn');
            const errorEl = document.getElementById('editError');
            
            btn.disabled = true;
            btn.textContent = 'Updating...';
            errorEl.classList.remove('active');
            
            try {
                const id = document.getElementById('editTemplateId').value;
                const previewImageFile = document.getElementById('editTemplatePreviewImage').files[0];
                
                let updateData = {
                    name: document.getElementById('editTemplateName').value,
                    category: document.getElementById('editTemplateCategory').value,
                    description: document.getElementById('editTemplateDescription').value,
                    price: parseFloat(document.getElementById('editTemplatePrice').value),
                    is_popular: document.getElementById('editTemplateIsPopular').checked
                };

                // Upload new preview image if provided
                if (previewImageFile) {
                    const { data: template } = await supabaseClient.from('templates').select('slug').eq('id', id).single();
                    const ext = previewImageFile.name.split('.').pop();
                    const path = `previews/${template.slug}.${ext}`;
                    
                    const { error: uploadError } = await supabaseClient.storage
                        .from('templates')
                        .upload(path, previewImageFile, { upsert: true });

                    if (uploadError) throw uploadError;

                    const { data: urlData } = supabaseClient.storage.from('templates').getPublicUrl(path);
                    updateData.preview_image = urlData.publicUrl;
                }

                const { error } = await supabaseClient
                    .from('templates')
                    .update(updateData)
                    .eq('id', id);

                if (error) throw error;

                showNotification('Template updated successfully!', 'success');
                closeModal('editTemplateModal');
                loadAdminTemplates();
                loadBrowseTemplates();
            } catch (error) {
                errorEl.textContent = error.message;
                errorEl.classList.add('active');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Update Template';
            }
        }

        async function deleteAdminTemplate(id, name) {
            if (!confirm(`Delete "${name}"? This cannot be undone.`)) return;

            try {
                const { error } = await supabaseClient
                    .from('templates')
                    .delete()
                    .eq('id', id);

                if (error) throw error;

                showNotification('Template deleted successfully!', 'success');
                loadAdminTemplates();
                loadBrowseTemplates();
            } catch (error) {
                showNotification('Error deleting template: ' + error.message, 'error');
            }
        }

        async function loadAdminHeroImages() {
            const list = document.getElementById('adminHeroImagesList');
            
            try {
                const { data: files, error } = await supabaseClient.storage
                    .from('templates')
                    .list('hero', { limit: 100 });

                if (error) throw error;

                if (!files || files.length === 0) {
                    list.innerHTML = '<p style="color: var(--text-muted);">No hero images uploaded yet</p>';
                    return;
                }

                list.innerHTML = files.filter(f => f.name !== '.emptyFolderPlaceholder').map(file => {
                    const { data } = supabaseClient.storage.from('templates').getPublicUrl(`hero/${file.name}`);
                    return `
                        <div style="position: relative; border-radius: 8px; overflow: hidden; aspect-ratio: 16/9;">
                            <img src="${data.publicUrl}" style="width: 100%; height: 100%; object-fit: cover;" />
                            <button onclick="deleteHeroImage('${file.name}')" style="position: absolute; top: 0.5rem; right: 0.5rem; background: #dc2626; color: white; border: none; border-radius: 4px; padding: 0.25rem 0.5rem; cursor: pointer; font-size: 0.8rem;">Delete</button>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                list.innerHTML = '<p style="color: var(--text-muted);">Error loading hero images</p>';
            }
        }

        async function handleAdminHeroUpload(event) {
            event.preventDefault();
            
            const btn = document.getElementById('adminHeroBtn');
            const file = document.getElementById('adminHeroImage').files[0];
            
            btn.disabled = true;
            btn.textContent = 'Uploading...';
            
            try {
                const timestamp = Date.now();
                const ext = file.name.split('.').pop();
                const path = `hero/hero-${timestamp}.${ext}`;

                const { error } = await supabaseClient.storage
                    .from('templates')
                    .upload(path, file);

                if (error) throw error;

                showNotification('Hero image uploaded successfully!', 'success');
                document.getElementById('adminHeroUploadForm').reset();
                loadAdminHeroImages();
            } catch (error) {
                showNotification('Error uploading hero image: ' + error.message, 'error');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Upload Hero Image';
            }
        }

        async function deleteHeroImage(filename) {
            if (!confirm('Delete this hero image?')) return;

            try {
                const { error } = await supabaseClient.storage
                    .from('templates')
                    .remove([`hero/${filename}`]);

                if (error) throw error;

                showNotification('Hero image deleted!', 'success');
                loadAdminHeroImages();
            } catch (error) {
                showNotification('Error deleting image: ' + error.message, 'error');
            }
        }

        async function handleAdminAddTemplate(event) {
            event.preventDefault();
            
            const btn = document.getElementById('adminAddBtn');
            const errorEl = document.getElementById('adminError');
            
            btn.disabled = true;
            btn.textContent = 'Uploading...';
            errorEl.classList.remove('active');
            
            try {
                const previewImage = document.getElementById('adminTemplatePreviewImage').files[0];
                const zipFile = document.getElementById('adminTemplateZipFile').files[0];
                const slug = document.getElementById('adminTemplateSlug').value;

                // Upload preview image
                const previewImageExt = previewImage.name.split('.').pop();
                const previewImagePath = `previews/${slug}.${previewImageExt}`;
                const { error: imageError } = await supabaseClient.storage
                    .from('templates')
                    .upload(previewImagePath, previewImage, { upsert: true });

                if (imageError) throw imageError;

                // Upload ZIP file
                const zipPath = `files/${slug}.zip`;
                const { error: zipError } = await supabaseClient.storage
                    .from('templates')
                    .upload(zipPath, zipFile, { upsert: true });

                if (zipError) throw zipError;

                // Get public URLs
                const { data: previewUrlData } = supabaseClient.storage
                    .from('templates')
                    .getPublicUrl(previewImagePath);

                const { data: zipUrlData } = supabaseClient.storage
                    .from('templates')
                    .getPublicUrl(zipPath);

                // Insert into database
                const { error: dbError } = await supabaseClient
                    .from('templates')
                    .insert({
                        name: document.getElementById('adminTemplateName').value,
                        slug: slug,
                        category: document.getElementById('adminTemplateCategory').value,
                        description: document.getElementById('adminTemplateDescription').value,
                        price: parseFloat(document.getElementById('adminTemplatePrice').value),
                        preview_image: previewUrlData.publicUrl,
                        download_url: zipUrlData.publicUrl,
                        is_popular: document.getElementById('adminTemplateIsPopular').checked,
                        downloads: 0
                    });

                if (dbError) throw dbError;

                showNotification('Template added successfully!', 'success');
                document.getElementById('adminAddTemplateForm').reset();
                loadAdminTemplates();
                loadBrowseTemplates();
            } catch (error) {
                errorEl.textContent = error.message;
                errorEl.classList.add('active');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Add Template';
            }
        }
    </script>
    <!-- Cart Modal -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCartModal()"></div>
    <div class="cart-modal" id="cartModal">
        <div class="cart-modal-header">
            <h2 class="cart-modal-title">Shopping Cart</h2>
            <button class="cart-modal-close" onclick="toggleCartModal()">&times;</button>
        </div>
        <div class="cart-modal-body" id="cartModalBody">
            <div class="cart-empty">
                <div class="cart-empty-icon"></div>
                <div class="cart-empty-text">Your cart is empty</div>
                <div class="cart-empty-subtext">Any templates you add to your cart will be displayed here.</div>
            </div>
        </div>
        <div class="cart-modal-footer" id="cartModalFooter" style="display: none;">
            <div class="cart-modal-total">
                <span>Total:</span>
                <span id="cartModalTotal">$0</span>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <button class="btn btn-outline btn-block" onclick="clearCart()" style="flex: 1;">Clear Cart</button>
                <button class="btn btn-primary btn-block" onclick="proceedToCheckout()" style="flex: 2;">Proceed to Checkout</button>
            </div>
        </div>
    </div>
    
    </div><!-- End main-content -->
</body>
</html>
